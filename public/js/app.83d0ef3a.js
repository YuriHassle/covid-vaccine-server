(function(e){function t(t){for(var i,s,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},n={app:0},r=[];function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0151":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFEAAAAyCAMAAAATMcfwAAAAM1BMVEVHcEz////////////////////////////////////////////////////////////////P0YphAAAAEHRSTlMAY0f48OnP4LyJpXjFsdiYrGr5lwAAAwFJREFUWMPtltuOHSsMRAuwsQGarv//2vMA9GUyR1EykaJIw9OmMWv7UnY38L2+119esZT42h/ZLHsDAOO1FOgk/TITMjUAQHEz87opjSTbDfQLUV5Ezl3a9w6SLACaLoPU51knyXwB842QFzGt3bEMZRFbum3qfZI2sDycypOR3d3d6yLK0/BDGAEAzvn7XMROMgeguUic5uXy3x6meREjyXQC8RzL/RXleFyaiBjxOdEAIHIRy34ChHkvkZpIxjuNclXtUyLDrEsiWRBIMj8qW0n2fCUVddW5t4sx83isXZplVFLnv8ms29huGMl2TrkBAMbOsrW3HjefTBGNZJ/EsmudHADCLF7adQLgl0X7jNhIHsjk8K1He4gDB8k+s3c3Q83yox7TIkJJiYk8/cpxc7v0KNO589bZaqQxS/BjZVBX6PDnWayJZJ4duNesxS7zzPsnxDiz0i/iunGStNmBzyyg0M49Bz73cSk4bKIlD7vPM9KTmK6eNLNHHlcX+iaGNYkmsZKkmAlJ1pOkTnOZ7fVKw/lu2raIsFmDSRx8DrxxK/tYnXik1yB5EssmFnePmxhuE43xMe4CVyfGOpSk9vBh4jJu4mOQFgCtWyLTqFPt+TEXtfxs3L+nfSvh+w34j7+/zdL5/8dhayfiYPjw+N7b/XrFIQjxA8avyVQ0LqJDb2KU9jj8QAyUE4emUlSq68iaiiQbmo6gNlhVBuCUQDqDZVfpYM2qlXWoFNdUnkSETmfpJgdgObJ0c0EMJytDYWiRJ1yS6iRaLgw0iSh0hm4hdn352GDK7j6Jjd3dBXUCCg81Vrhk+ouYsIldRZ7EU8RaFzuqaLeMLna0JCOpTmIyOeES/GQwUZ9EH6JOp1jJIuMV9VdW4Z/u9T9P/IsrqfT9XaMypo5r/UKYrFHWJ0KqaEu24UtEuBZNB5CZY1AZhcFyUWXIIvG3iKZ+coaNFpkZLMtR6BLUfy/qNNwDTsy2GZuYk3v9daJoj1UsAyOJt2RymoifolaGWPmXZfcfJJ4/sR5ExsUAAAAASUVORK5CYII="},"034f":function(e,t,a){"use strict";a("85ec")},"0529":function(e,t,a){},"08c3":function(e,t,a){"use strict";a("0529")},"1a98":function(e,t,a){"use strict";a("ce77")},3582:function(e,t,a){"use strict";a("806d")},"3ee8":function(e,t,a){e.exports=a.p+"img/full_brand.8e5e2997.png"},"4ea6":function(e,t,a){"use strict";a("c93a")},"4ebe":function(e,t,a){},"4f19":function(e,t,a){"use strict";a("a218")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("Header"),a("v-main",[a("transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1),a("Footer")],1)},r=[],s=(a("b0c0"),function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",[i("div",{staticClass:"header-title"},[i("a",{staticClass:"vacinometro",attrs:{href:"https://labonline.manaus.am.gov.br/"}},[i("p",[e._v("VACINAÇÃO COVID-19")]),i("b",[e._v("SEMSA MANAUS")])])]),i("a",{attrs:{href:"https://manaus.am.gov.br"}},[i("img",{attrs:{src:a("3ee8")}})])])}],c={},l=c,u=(a("e57e"),a("2877")),d=Object(u["a"])(l,s,o,!1,null,"15edfe16",null),p=d.exports,m=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},f=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("footer",{staticClass:"pa-8"},[i("div",{staticClass:"container"},[i("div",{staticClass:"footer-text"},[i("p",[e._v(" © 2021 - Secretaria Municipal de Saúde - SEMSA ")]),i("p",[e._v(" Desenvolvido pelo Departamento de Tecnologia da Informação - DTI. ")])]),i("div",{staticClass:"footer-images"},[i("a",{attrs:{href:"https://covid19.manaus.am.gov.br/"}},[i("img",{attrs:{src:a("9a07")}})]),i("a",{attrs:{href:"https://semsa.manaus.am.gov.br/"}},[i("img",{attrs:{src:a("0151")}})])])])])}],v={},h=v,g=(a("3582"),Object(u["a"])(h,m,f,!1,null,"21e41ff6",null)),b=g.exports,C={name:"App",components:{Header:p,Footer:b},created:function(){localStorage.getItem("token")?this.$store.dispatch("getUser"):localStorage.getItem("token")||"login"===this.$router.history.current.name||this.$router.push({name:"login"})}},_=C,A=(a("034f"),a("6544")),x=a.n(A),w=a("7496"),y=a("f6c4"),F=Object(u["a"])(_,n,r,!1,null,null,null),S=F.exports;x()(F,{VApp:w["a"],VMain:y["a"]});var P=a("b6d0"),k=(a("45fc"),a("8c4f")),O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("div",{staticClass:"menu mx-auto mt-5"},[a("v-select",{attrs:{solo:"",items:e.menuItems,label:this.$store.state.user.name||"Carregando...",color:"indigo"},on:{change:function(t){return e.handleMenuClick()}},model:{value:e.selectedMenu,callback:function(t){e.selectedMenu=t},expression:"selectedMenu"}})],1),a("ApplicationForm",{attrs:{type:e.type,application:e.application},on:{changeType:function(t){e.type=t}}}),a("ApplicationList",{attrs:{searchCPFMsg:e.searchCPFMsg},on:{onEdit:e.handleEdit,findCPF:e.findCPF}})],1)},E=[],U=a("5530"),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-form",{ref:"applicationForm",on:{submit:function(t){return t.preventDefault(),e.handleSubmit()}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card",{staticClass:"mx-auto",attrs:{width:"600"}},[a("v-card-title",{staticClass:"white--text pa-5 card-title"},[a("v-icon",{attrs:{color:"white"}},[e._v("fa-user")]),a("p",{staticClass:"ml-3 mb-0 "},[e._v(" Dados do cidadão ")])],1),a("v-card-text",{staticClass:"pt-8 px-8"},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],staticClass:"mb-4",attrs:{label:"CPF",disabled:"edit"===e.type,"append-icon":"mdi-alert-circle",hint:e.CPFValidationMsg||"Somente números","persistent-hint":!!e.CPFValidationMsg||!1,inputmode:"numeric",clearable:"",outlined:"",rules:e.validators.cpf},on:{blur:function(t){return e.validateCPF()}},model:{value:e.application.citizen.cpf,callback:function(t){e.$set(e.application.citizen,"cpf",t)},expression:"application.citizen.cpf"}}),a("v-text-field",{staticClass:"mb-4",attrs:{label:"Nome",counter:"45",clearable:"","append-icon":"mdi-alert-circle",outlined:"",rules:e.validators.name},model:{value:e.application.citizen.name,callback:function(t){e.$set(e.application.citizen,"name","string"===typeof t?t.trim():t)},expression:"application.citizen.name"}}),a("v-select",{staticClass:"mb-4",attrs:{label:"Grupo prioritário",items:e.categories,"item-text":"name","item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:e.validators.categories,outlined:""},model:{value:e.application.category_id,callback:function(t){e.$set(e.application,"category_id",t)},expression:"application.category_id"}}),a("v-select",{staticClass:"mb-4",attrs:{label:"Grupo de atendimento",items:e.filteredServicegroups,"item-text":"name","item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:e.validators.servicegroups,outlined:""},model:{value:e.application.servicegroup_id,callback:function(t){e.$set(e.application,"servicegroup_id",t)},expression:"application.servicegroup_id"}}),a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"XX/XX/XXXX",expression:"'XX/XX/XXXX'"}],staticClass:"mb-4",attrs:{label:"Data de nascimento",clearable:"",hint:"somente números",inputmode:"numeric",rules:e.validators.birthday,outlined:""},model:{value:e.application.citizen.birthday,callback:function(t){e.$set(e.application.citizen,"birthday",t)},expression:"application.citizen.birthday"}}),a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"###############",expression:"'###############'"}],staticClass:"mb-2",attrs:{label:"CNS",hint:"Somente números",clearable:"",inputmode:"numeric",rules:e.validators.cns,outlined:""},model:{value:e.application.citizen.cns,callback:function(t){e.$set(e.application.citizen,"cns","string"===typeof t?t.trim():t)},expression:"application.citizen.cns"}})],1),a("v-card-title",{staticClass:"white--text card-title pa-5"},[a("v-icon",{attrs:{color:"white"}},[e._v("fa-syringe")]),a("p",{staticClass:"ml-3 mb-0"},[e._v(" Dados da vacina ")])],1),a("v-card-text",{staticClass:"pt-8 px-8"},[a("v-select",{staticClass:"mb-4",attrs:{label:"Dose",rules:e.validators.dose,outlined:"",items:[{text:1,value:1},{text:2,value:2}],"append-icon":"mdi-alert-circle"},model:{value:e.application.dose,callback:function(t){e.$set(e.application,"dose",t)},expression:"application.dose"}}),a("v-select",{staticClass:"mb-4",attrs:{label:"Local",items:e.locations,"item-text":"name","item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:e.validators.location,outlined:""},model:{value:e.application.location_id,callback:function(t){e.$set(e.application,"location_id",t)},expression:"application.location_id"}}),a("v-autocomplete",{staticClass:"mb-4",attrs:{label:"Vacinador",items:e.vaccinators,"item-text":"name","item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:e.validators.vaccinator,outlined:""},model:{value:e.application.vaccinator_id,callback:function(t){e.$set(e.application,"vaccinator_id",t)},expression:"application.vaccinator_id"}}),a("v-select",{staticClass:"mb-4",attrs:{label:"Lote",items:e.lots,"item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:e.validators.lot,outlined:""},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.name)+" ")]}},{key:"item",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.immunobiological.name)+" - "+e._s(a.name)+" ")]}}]),model:{value:e.application.lot_id,callback:function(t){e.$set(e.application,"lot_id",t)},expression:"application.lot_id"}}),a("v-text-field",{attrs:{label:"Data de vacinação",type:"date",min:"2021-01-19",max:e.today,"append-icon":"mdi-alert-circle",rules:e.validators.application_date,outlined:""},model:{value:e.application.application_date,callback:function(t){e.$set(e.application,"application_date",t)},expression:"application.application_date"}})],1),a("v-card-actions",{staticClass:"flex-column justify-center"},[a("div",{staticClass:"flex-row"},[a("v-btn",{staticClass:"white--text btn mb-4",attrs:{elevation:"2",type:"submit"}},[e._v(" "+e._s("create"===e.type?"Cadastrar":"Editar")+" ")]),"edit"===e.type?a("v-btn",{staticClass:"ml-5 mb-4",attrs:{elevation:"2"},on:{click:function(t){return e.handleCancel()}}},[e._v(" Cancelar ")]):e._e()],1),a("div",{staticClass:"message"},[a("p",[e._v(e._s(e.message))])])])],1)],1)],1)},V=[],j=(a("99af"),a("4de4"),a("fb6a"),a("4d90"),a("3501"));function z(e){return Object(j["a"])(e)}function I(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return e=i+"-"+a+"-"+t,e}function L(e){e=String(e);var t=e.slice(0,2),a=e.slice(3,5),i=e.slice(6,10);return"".concat(i,"-").concat(a,"-").concat(t)}function D(e){e=String(e);var t=e.slice(0,4),a=e.slice(5,7),i=e.slice(8,10);return"".concat(i,"/").concat(a,"/").concat(t)}a("d3b7");var $=a("bc3a"),T=a.n($),B=a("3d20"),X=a.n(B),q=a("2f62");i["a"].use(q["a"]);var N=new q["a"].Store({strict:!0,state:{user:{id:"",cpf:"",name:"",email:""},user_applications:[]},mutations:{UPDATE_USER:function(e,t){e.user=Object.assign(e.user,t)},UPDATE_USER_APPLICATIONS:function(e,t){e.user_applications=t},ADD_USER_APPLICATION:function(e,t){e.user_applications.unshift(t)}},actions:{getUser:function(e){return Z.get("/user").then((function(t){var a=t.data;e.commit("UPDATE_USER",a),localStorage.setItem("user_id",a.id)}))},getUserApplications:function(e){var t=localStorage.getItem("user_id");return Z.get("/applications?user_id=".concat(t,"&application_date=").concat(I())).then((function(t){var a=t.data;e.commit("UPDATE_USER_APPLICATIONS",a.data)}))},addUserApplication:function(e,t){var a=Object(U["a"])({},t);a.citizen=Object(U["a"])({},t.citizen),e.commit("ADD_USER_APPLICATION",a)},login:function(e,t){return Z.post("/login",t).then((function(t){var a=t.data;return a.data.successful_login&&(e.commit("UPDATE_USER",a.data.user),localStorage.setItem("token",a.data.access_token),localStorage.setItem("user_id",a.data.user.id)),a}))},logout:function(e){e.commit("UPDATE_USER",{id:"",cpf:"",name:"",email:""}),localStorage.getItem("token")&&window.localStorage.removeItem("token"),localStorage.getItem("user_id")&&window.localStorage.removeItem("user_id")}}}),J=T.a.create({baseURL:"https://smv.manaus.am.gov.br/api"});J.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),J.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&"login"!==tt.history.current.name&&tt.push({name:"login"}).then((function(){N.dispatch("logout"),X.a.fire({icon:"info",title:"Sessão expirada",text:"A sua sessão expirou. Você foi redirecionado para a página de login.",showConfirmButton:!1,timer:2500})})),Promise.reject(e)}));var Z={get:function(e){return J.get(e)},post:function(e,t){return J.post(e,t)},delete:function(e){return J.delete(e)},put:function(e,t){return J.put(e,t)}},H=a("d4ec"),R=a("bee2"),Q=function(){function e(){Object(H["a"])(this,e)}return Object(R["a"])(e,null,[{key:"required",value:function(e){return function(t){return!!t||e||"Este campo é obrigatório"}}},{key:"email",value:function(){return function(e){return/.+@.+/.test(e)||"E-mail precisa ter um formato válido"}}},{key:"max",value:function(e){return function(t){return!t||t.length<=e||"O número máximo de caracteres é ".concat(e)}}},{key:"min",value:function(e){return function(t){return!t||t.length>=e||"O número mínimo de caracteres é ".concat(e)}}},{key:"len",value:function(e){return function(t){return!t||t.length===e||"O número de caracteres deve ser ".concat(e)}}},{key:"validateCPF",value:function(){return function(e){return!e||z(e)||"Número de CPF inexistente"}}}]),e}(),K={name:"ApplicationForm",props:["type","application"],data:function(){return{valid:null,message:"",CPFValidationMsg:"",checkedCPF:!1,today:I(),locations:[],categories:[],servicegroups:[],lots:[],vaccinators:[],errors:[],validators:{cpf:[Q.required(),Q.len(11),Q.validateCPF()],name:[Q.required(),Q.min(9),Q.max(45)],categories:[Q.required()],servicegroups:[Q.required()],birthday:[Q.len(10)],cns:[Q.len(15)],location:[Q.required()],vaccinator:[Q.required()],lot:[Q.required()],application_date:[Q.required()],dose:[Q.required()]}}},computed:{filteredServicegroups:function(){var e=this;return this.servicegroups?this.servicegroups.filter((function(t){return t.category_id===e.application.category_id})):[]}},methods:{handleSubmit:function(){if(this.$refs.applicationForm.validate(),!this.valid)return this.message="Por favor, preencha os dados corretamente!";this.message="Enviando dados...";var e=this.application.citizen.birthday;e&&(this.application.citizen.birthday=L(e)),"create"===this.type?this.registerApplication():"edit"===this.type&&this.editApplication()},handleCancel:function(){this.$refs.applicationForm.reset(),this.$emit("changeType","create")},registerApplication:function(){var e=this;if(!this.checkedCPF)return this.message="Por favor, aguarde a validação do CPF!";this.application.user_id=localStorage.getItem("user_id"),Z.post("/applications",this.application).then((function(t){var a=t.data;e.application.id=a.data.id,e.application.citizen.id=a.data.citizen_id,console.log(e.application),e.$store.dispatch("addUserApplication",e.application),e.message="",e.CPFValidationMsg="",e.clearForm(),e.$refs.applicationForm.resetValidation(),X.a.fire({icon:"success",title:"Cadastrado com êxito",text:"Os dados registrados com sucesso!",showConfirmButton:!1,timer:1500})})).catch((function(){e.message="",X.a.fire({icon:"error",title:"Erro ao cadastrar",text:"Ocorreu algum erro. Por favor, tente novamente.",showConfirmButton:!1,timer:2e3})}))},editApplication:function(){var e=this;this.application.updated_by=localStorage.getItem("user_id"),Z.put("/applications/".concat(this.application.id),this.application).then((function(){e.message="",e.$refs.applicationForm.reset(),e.$emit("changeType","create"),X.a.fire({icon:"success",title:"Alteração realizada com êxito",text:"Os dados foram atualizados com sucesso!",showConfirmButton:!1,timer:1500})})).catch((function(){e.message="",X.a.fire({icon:"error",title:"Erro ao atualizar",text:"Ocorreu algum erro. Por favor, tente novamente.",showConfirmButton:!1,timer:2e3})}))},validateCPF:function(){var e=this,t=this.application.citizen.cpf;t&&(this.CPFValidationMsg="Verificando CPF...",Z.get("/applications?cpf=".concat(t)).then((function(t){var a=t.data;if(a.data.length>1){var i=D(a.data[1].application_date),n=D(a.data[0].application_date);e.CPFValidationMsg="O portador deste CPF já recebeu as duas doses.\n              1ª dose: ".concat(i,"\n              2ª dose: ").concat(n)}else e.checkedCPF=!0,1===a.data.length?(e.application.dose=2,e.CPFValidationMsg="CPF apto para receber a 2ª dose!"):(e.application.dose=1,e.CPFValidationMsg="CPF apto para receber a 1ª dose!")})).catch((function(){e.CPFValidationMsg="Não foi possível consultar o CPF. Favor recarregar a página e tentar novamente."})))},clearForm:function(){this.application.servicegroup_id="",this.application.citizen.cpf="",this.application.citizen.cns="",this.application.citizen.name="",this.application.citizen.birthday=""},fetchVaccinators:function(){var e=this;Z.get("/vaccinators").then((function(t){var a=t.data;e.vaccinators=a.data}))},fetchLocations:function(){var e=this;Z.get("/locations").then((function(t){var a=t.data;e.locations=a.data}))},fetchCategories:function(){var e=this;Z.get("/categories").then((function(t){var a=t.data;e.categories=a.data}))},fetchServicegroups:function(){var e=this;Z.get("/servicegroups").then((function(t){var a=t.data;e.servicegroups=a.data}))},fetchLots:function(){var e=this;Z.get("/lots").then((function(t){var a=t.data;e.lots=a.data}))}},created:function(){this.fetchVaccinators(),this.fetchLocations(),this.fetchCategories(),this.fetchServicegroups(),this.fetchLots()}},W=K,G=a("c6a6"),Y=a("8336"),ee=a("b0af"),te=a("99d9"),ae=a("a523"),ie=a("4bd4"),ne=a("132d"),re=a("b974"),se=a("8654"),oe=Object(u["a"])(W,M,V,!1,null,"369e71da",null),ce=oe.exports;x()(oe,{VAutocomplete:G["a"],VBtn:Y["a"],VCard:ee["a"],VCardActions:te["a"],VCardText:te["b"],VCardTitle:te["c"],VContainer:ae["a"],VForm:ie["a"],VIcon:ne["a"],VSelect:re["a"],VTextField:se["a"]});var le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("v-card",{staticClass:"mx-auto mt-8 mb-8",attrs:{width:"600"}},[a("v-card-title",{staticClass:"white--text pa-5 card-title"},[a("v-icon",{attrs:{color:"white"}},[e._v("fa-laptop")]),a("p",{staticClass:"ml-3 mb-0"},[e._v(" Vacinações digitadas por "+e._s(this.$store.state.user.name)+" ")])],1),a("v-card-text",{staticClass:"pa-8"},[a("h3",[e._v("Buscar vacinações de datas anteriores:")]),a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],staticClass:"mb-4",attrs:{label:"CPF","append-icon":"mdi-send",clearable:"",hint:e.searchCPFMsg||"Somente números","persistent-hint":!!e.searchCPFMsg||!1,inputmode:"numeric",rules:e.validators.cpf,outlined:""},on:{"click:append":function(t){return e.$emit("findCPF",e.cpf)}},model:{value:e.cpf,callback:function(t){e.cpf=t},expression:"cpf"}}),a("div",{staticClass:"font-weight-bold ml-8 mb-2"},[e._v(" Hoje ")]),0!==e.userApplications.length?a("v-timeline",{attrs:{"align-top":"",dense:""}},e._l(e.userApplications,(function(t){return a("v-timeline-item",{key:t.id,attrs:{color:1===t.dose?"#CEB8A1":"#6862A7",small:""}},[a("div",{staticClass:"timeline-content"},[a("div",[a("div",{staticClass:"font-weight-normal"},[a("strong",[e._v(e._s(t.citizen.name))])]),a("div",[e._v("CPF: "+e._s(t.citizen.cpf))]),a("div",[e._v("Dose: "+e._s(t.dose))])]),a("a",{on:{click:function(a){return a.preventDefault(),e.$emit("onEdit",t)}}},[a("v-icon",{staticClass:"ml-7"},[e._v(" far fa-edit ")])],1)])])})),1):a("div",{staticClass:"message ml-8"},[a("p",[e._v("Os seus registros da data de hoje aparecerão aqui")])])],1)],1)],1)},ue=[],de={props:["searchCPFMsg"],data:function(){return{cpf:"",validators:{cpf:[Q.required(),Q.len(11),Q.validateCPF()]}}},computed:{userApplications:function(){return this.$store.state.user_applications}},mounted:function(){this.$store.dispatch("getUserApplications")}},pe=de,me=(a("cfa8"),a("8414")),fe=a("1e06"),ve=Object(u["a"])(pe,le,ue,!1,null,"6fa1c516",null),he=ve.exports;x()(ve,{VCard:ee["a"],VCardText:te["b"],VCardTitle:te["c"],VIcon:ne["a"],VTextField:se["a"],VTimeline:me["a"],VTimelineItem:fe["a"]});var ge={name:"Home",components:{ApplicationForm:ce,ApplicationList:he},data:function(){return{searchCPFMsg:"",type:"create",application:{id:"",user_id:"",location_id:"",lot_id:"",category_id:"",servicegroup_id:"",vaccinator_id:"",application_date:"",dose:"",citizen:{cpf:"",cns:"",name:"",birthday:""}},selectedMenu:"",menuItems:[{text:"Deslogar",value:"logout"},{text:"Trocar senha",value:"change-password"},{text:"Alterar dados",value:"update-user-data"}]}},methods:{handleEdit:function(e){console.log(e),this.type="edit",this.application=Object(U["a"])({},e),this.application.citizen=Object(U["a"])({},e.citizen);var t=this.application.citizen.birthday;t&&(this.application.citizen.birthday=D(t))},findCPF:function(e){var t=this;this.searchCPFMsg="Procurando CPF...",Z.get("applications?cpf=".concat(e)).then((function(e){var a=e.data;if(0!==a.data.length){t.application=a.data[0];var i=a.data[0].citizen.birthday;i&&(t.application.citizen.birthday=D(i)),t.searchCPFMsg="",t.type="edit"}else t.searchCPFMsg="Esse CPF não consta em nossa base"}))},handleMenuClick:function(){"logout"===this.selectedMenu&&(this.$store.dispatch("logout"),this.$router.push({name:"login"})),"change-password"===this.selectedMenu&&this.$router.push({name:"updatepassword"}),"update-user-data"===this.selectedMenu&&this.$router.push({name:"updateuserdata"}),this.selectedMenu=""}}},be=ge,Ce=(a("08c3"),Object(u["a"])(be,O,E,!1,null,"740e9ad4",null)),_e=Ce.exports;x()(Ce,{VContainer:ae["a"],VSelect:re["a"]});var Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"container"},[a("loading",{attrs:{active:e.isLoading,"can-cancel":!0,"is-full-page":!0},on:{"update:active":function(t){e.isLoading=t}}}),e.errors.length?a("div",{staticClass:"validation-errors"},[a("b",[e._v("Por favor, corrija o(s) seguinte(s) erro(s):")]),a("ol",e._l(e.errors,(function(t,i){return a("li",{key:i},[e._v(e._s(t))])})),0)]):e._e(),a("form",[a("FormField",{attrs:{label:"Senha Antiga",required:!0,name:"old-password"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",name:"old-password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),a("FormField",{attrs:{label:"Nova Senha",required:!0,name:"new-password"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.new_password,expression:"user.new_password"}],attrs:{type:"password",name:"new-password"},domProps:{value:e.user.new_password},on:{input:function(t){t.target.composing||e.$set(e.user,"new_password",t.target.value)}}})]),a("FormField",{attrs:{label:"Confirmar Senha",required:!0,name:"confirm-password"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.new_confirm_password,expression:"user.new_confirm_password"}],attrs:{type:"password",name:"confirm-password"},domProps:{value:e.user.new_confirm_password},on:{input:function(t){t.target.composing||e.$set(e.user,"new_confirm_password",t.target.value)}}})]),a("button",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.updatePassword()}}},[e._v(" Atualizar ")]),a("button",{staticClass:"btn btn-danger",on:{click:function(t){return t.preventDefault(),e.back()}}},[e._v("Cancelar")])],1)],1)},xe=[],we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box-form"},[a("label",{attrs:{for:e.name}},[e._v(e._s(e.label)+" "),e.required?a("span",[e._v("*")]):e._e()]),e._t("default")],2)},ye=[],Fe={props:{label:{type:String,required:!0},name:{type:String,required:!0},required:{type:Boolean,default:!1}}},Se=Fe,Pe=(a("1a98"),Object(u["a"])(Se,we,ye,!1,null,"9282a50c",null)),ke=Pe.exports,Oe=a("9062"),Ee=a.n(Oe),Ue=(a("e40d"),{name:"updatepassword",components:{FormField:ke,Loading:Ee.a},data:function(){return{errors:[],user:{},isLoading:!1}},methods:{updatePassword:function(){var e=this;this.isLoading=!0,Z.put("/users/updatepassword",this.user).then((function(t){var a=t.data;a.data.errors.length>0?(e.errors=a.data.errors,e.isLoading=!1):(e.errors=[],X.a.fire({icon:"success",title:"Alteração realizada com êxito",text:"Os dados foram atualizados com sucesso!",showConfirmButton:!1,timer:1500}),e.$router.push("/"))}))},back:function(){this.$router.go(-1)}}}),Me=Ue,Ve=(a("f6b6"),Object(u["a"])(Me,Ae,xe,!1,null,"724239cc",null)),je=Ve.exports,ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"container"},[a("loading",{attrs:{active:e.isLoading,"can-cancel":!0,"is-full-page":!0},on:{"update:active":function(t){e.isLoading=t}}}),e.errors.length?a("div",{staticClass:"validation-errors"},[a("b",[e._v("Por favor, corrija o(s) seguinte(s) erro(s):")]),a("ol",e._l(e.errors,(function(t,i){return a("li",{key:i},[e._v(e._s(t))])})),0)]):e._e(),a("UserForm",{attrs:{type:"edit",user:e.user}}),a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.updateUserData()}}},[e._v(" Atualizar ")]),a("button",{staticClass:"btn btn-danger",on:{click:function(t){return t.preventDefault(),e.back()}}},[e._v("Cancelar")])])],1)},Ie=[],Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",["edit"==e.type?a("h1",[e._v("Atualizar Dados")]):a("h1",[e._v("Cadastrar Usuário")]),a("div",{staticClass:"fields-container"},[a("FormField",{attrs:{label:"Nome",required:!0,name:"name"}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.user.name,expression:"user.name",modifiers:{trim:!0}}],attrs:{type:"text",name:"name",disabled:"type=='edit'"},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),a("FormField",{attrs:{label:"CPF",required:!0,name:"cpf"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.cpf,expression:"user.cpf"}],attrs:{type:"text",name:"cpf",disabled:"type=='edit'"},domProps:{value:e.user.cpf},on:{input:function(t){t.target.composing||e.$set(e.user,"cpf",t.target.value)}}})]),a("FormField",{attrs:{label:"Email",required:!0,name:"email"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"text",name:"email",inputmode:"text"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})])],1)])},De=[],$e={name:"UserForm",props:["type","user"],components:{FormField:ke},data:function(){return{}}},Te=$e,Be=(a("4ea6"),Object(u["a"])(Te,Le,De,!1,null,"25fac4da",null)),Xe=Be.exports,qe={name:"updateuserdata",components:{Loading:Ee.a,UserForm:Xe},data:function(){return{errors:[],user:{},isLoading:!1,edit:!0}},methods:{updateUserData:function(){var e=this;this.isLoading=!0,Z.put("/users/updateuserdata",this.user).then((function(t){var a=t.data;a.data.errors.length>0?(e.errors=a.data.errors,e.isLoading=!1):(e.errors=[],X.a.fire({icon:"success",title:"Alteração realizada com êxito",text:"Os dados foram atualizados com sucesso!",showConfirmButton:!1,timer:1500}),e.$router.push("/"))}))},back:function(){this.$router.go(-1)}},created:function(){var e=this;this.isLoading=!0;var t=this;this.$store.dispatch("getUser").then((function(){t.user=Object.assign({},e.$store.state.user),e.isLoading=!1}))}},Ne=qe,Je=(a("4f19"),Object(u["a"])(Ne,ze,Ie,!1,null,"7c5bdef6",null)),Ze=Je.exports,He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-form",{ref:"loginForm",on:{submit:function(t){return t.preventDefault(),e.handleSubmit()}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card",{staticClass:"mx-auto pt-5",attrs:{width:"500"}},[a("v-card-title",{staticClass:"white--text pa-5 card-title"},[a("v-icon",{attrs:{color:"white"}},[e._v("fa-user")]),a("p",{staticClass:"ml-3 mb-0 "},[e._v(" Entrar ")])],1),a("v-card-text",{staticClass:"pt-8 px-8"},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],staticClass:"mb-4",attrs:{label:"CPF",hint:"Somente números",inputmode:"numeric",clearable:"",outlined:"",rules:e.validators.cpf},model:{value:e.credentials.cpf,callback:function(t){e.$set(e.credentials,"cpf",t)},expression:"credentials.cpf"}}),a("v-text-field",{attrs:{label:"Senha",clearable:"",outlined:"",rules:e.validators.password,type:"password"},model:{value:e.credentials.password,callback:function(t){e.$set(e.credentials,"password",t)},expression:"credentials.password"}})],1),a("v-card-actions",{staticClass:"flex-column justify-center"},[a("v-btn",{staticClass:"white--text btn mb-4",attrs:{elevation:"2",type:"submit"}},[e._v(" Logar ")]),a("div",{staticClass:"message"},[a("p",[e._v(e._s(e.message))])])],1)],1)],1)],1)},Re=[],Qe={name:"Login",data:function(){return{valid:!1,message:"",credentials:{cpf:"",password:""},validators:{cpf:[Q.required(),Q.len(11)],password:[Q.required()]}}},methods:{handleSubmit:function(){var e=this;if(this.$refs.loginForm.validate(),!this.valid)return this.message="Por favor, preencha os dados corretamente!";this.message="Verificando credenciais...",this.$store.dispatch("login",this.credentials).then((function(t){t.data.successful_login?e.$router.push({name:"home"}):e.message="Credenciais inválidas!"})).catch((function(){e.message="Não foi possível se conectar com o servidor :("}))}}},Ke=Qe,We=Object(u["a"])(Ke,He,Re,!1,null,"78eb8232",null),Ge=We.exports;x()(We,{VBtn:Y["a"],VCard:ee["a"],VCardActions:te["a"],VCardText:te["b"],VCardTitle:te["c"],VContainer:ae["a"],VForm:ie["a"],VIcon:ne["a"],VTextField:se["a"]});var Ye=void 0;i["a"].use(k["a"]);var et=new k["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:_e},{path:"/alterarsenha",name:"updatepassword",component:je},{path:"/alterardados",name:"updateuserdata",component:Ze},{path:"/login",name:"login",component:Ge}],scrollBehavior:function(){return window.scrollTo({top:0,behavior:"smooth"})}});et.beforeEach((function(e,t,a){e.matched.some((function(e){return e.meta.login}))?window.localStorage.token?a():X.a.fire({icon:"info",title:"Sessão expirada",text:"A sua sessão expirou. Você será redirecionado para a página de login em instantes.",showConfirmButton:!1,timer:2500}).then((function(){Ye.$store.dispatch("logout"),a("/login")})):a()}));var tt=et,at=a("f309");i["a"].use(at["a"]);var it=new at["a"]({});i["a"].config.productionTip=!1,i["a"].use(P["a"]),new i["a"]({router:tt,store:N,vuetify:it,render:function(e){return e(S)}}).$mount("#app")},7211:function(e,t,a){},"806d":function(e,t,a){},"85ec":function(e,t,a){},"9a07":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHcAAAArCAMAAAB1q+c0AAAASFBMVEVHcEz///////////////////////////////////////////////////////////////////////////////////8Acrv///+8vuJ9AAAAFnRSTlMAYLAwQKAQwIC/4CBwB3+RuPDQUO8/Ui5SjgAAA0ZJREFUWMPF19t24ygQBdDDtQpQW6PbOv//p/NQSLY77ViZXhrzEDsYsSUKKAR+pET8obLqxSX92aX8wqUlvnCvhl+6F8Ov3Wvhb1z+8+sz7pXwt+4XuI2VLAuAdit+yACG4hsAIBUFhlJK8Yu19kUB6K0XRPt0793f4LhabUYkSa4OEFKtIwog1kABwJFsuPcO3b+8d5/gtpKzjtOAhmQ/LxByzQBSd+e4zNa1JzkAIjJxEhEoKSIynnEf4USOAIC8ug5XCEkHNHZXACUz0MiJFUCvBdTuB6fcB7iSGQAwkDschWQFdHfnbZtZrdFAhmd327Ytn3PvMO1yQzo8COeJEZX+Ht8pAKhMmUzPriWEc+4Bk/Pd7bATSmJZWNXcSSayZARyQeL6F+4OH+O88ICbUAI5c9Ajvgs5IJGlVNL91/je4ZH0GWgNdYcFQoGQzHcXpOa+5Oj/xjU4T2QthWsOU4czhAJHJug+rxZPOke6GGMi26NbSinlB67BwZ6TAUFImzS2cjTsrqUUiM2FYEv4Kb78iduf2HmRMQBAizEDgFPXR04d4LyIjBFQjbbkdDnaxH7W+JFrsJmX54WnokAkb/+3axEeq/vSRw4XuraU4m04NHcbhwygxZSXlpG3DQDCltvWgLht7UkKALLtkj+cz4Ane2c2txMaUuHqvSLbVjQxKtUm77pHJd9WCpBIpvwD1xvbLLUByCurqgSMfemEgJkKBE4wt0q1bcO2OgqUk0wcz7v9aijnntoGThkAct5P+s1W8MDUXQW078bQ5CmYuSDaln3K9fdMGCZLbd4yDZrsjdIQSMDT3V0bgn7L5sIidcY92IUzxj21WYch7a2WgIlLJvODK0yI2xbMHbmW2YbghOsfDxx1tnEae07Uwx0AZXJMeHArNdqJQKnInqxnn/fO7qFcsO8gbj/h9UzF1TPgKb4BMcZeZxOjnopvuq/Agf742485HsFg8YMtM8Hu1rI+XK5UwN2S3fZb94GFSgTQxE47g5BVgVG9TE77qqQ7XJKT4sklObkz+0Z6v+Pl7FDb1/oWY3j6twGuZ6l3bvrMe0r6zHvZ+Jn30CvZb9xL2dfutexL92L2lVvLxWVmhHykhH8BWB/EwHHvd74AAAAASUVORK5CYII="},a218:function(e,t,a){},c93a:function(e,t,a){},ce77:function(e,t,a){},cfa8:function(e,t,a){"use strict";a("7211")},e57e:function(e,t,a){"use strict";a("f755")},f6b6:function(e,t,a){"use strict";a("4ebe")},f755:function(e,t,a){}});
//# sourceMappingURL=app.83d0ef3a.js.map