(function(t){function e(e){for(var i,s,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},n={app:0},r=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0151":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFEAAAAyCAMAAAATMcfwAAAAM1BMVEVHcEz////////////////////////////////////////////////////////////////P0YphAAAAEHRSTlMAY0f48OnP4LyJpXjFsdiYrGr5lwAAAwFJREFUWMPtltuOHSsMRAuwsQGarv//2vMA9GUyR1EykaJIw9OmMWv7UnY38L2+119esZT42h/ZLHsDAOO1FOgk/TITMjUAQHEz87opjSTbDfQLUV5Ezl3a9w6SLACaLoPU51knyXwB842QFzGt3bEMZRFbum3qfZI2sDycypOR3d3d6yLK0/BDGAEAzvn7XMROMgeguUic5uXy3x6meREjyXQC8RzL/RXleFyaiBjxOdEAIHIRy34ChHkvkZpIxjuNclXtUyLDrEsiWRBIMj8qW0n2fCUVddW5t4sx83isXZplVFLnv8ms29huGMl2TrkBAMbOsrW3HjefTBGNZJ/EsmudHADCLF7adQLgl0X7jNhIHsjk8K1He4gDB8k+s3c3Q83yox7TIkJJiYk8/cpxc7v0KNO589bZaqQxS/BjZVBX6PDnWayJZJ4duNesxS7zzPsnxDiz0i/iunGStNmBzyyg0M49Bz73cSk4bKIlD7vPM9KTmK6eNLNHHlcX+iaGNYkmsZKkmAlJ1pOkTnOZ7fVKw/lu2raIsFmDSRx8DrxxK/tYnXik1yB5EssmFnePmxhuE43xMe4CVyfGOpSk9vBh4jJu4mOQFgCtWyLTqFPt+TEXtfxs3L+nfSvh+w34j7+/zdL5/8dhayfiYPjw+N7b/XrFIQjxA8avyVQ0LqJDb2KU9jj8QAyUE4emUlSq68iaiiQbmo6gNlhVBuCUQDqDZVfpYM2qlXWoFNdUnkSETmfpJgdgObJ0c0EMJytDYWiRJ1yS6iRaLgw0iSh0hm4hdn352GDK7j6Jjd3dBXUCCg81Vrhk+ouYsIldRZ7EU8RaFzuqaLeMLna0JCOpTmIyOeES/GQwUZ9EH6JOp1jJIuMV9VdW4Z/u9T9P/IsrqfT9XaMypo5r/UKYrFHWJ0KqaEu24UtEuBZNB5CZY1AZhcFyUWXIIvG3iKZ+coaNFpkZLMtR6BLUfy/qNNwDTsy2GZuYk3v9daJoj1UsAyOJt2RymoifolaGWPmXZfcfJJ4/sR5ExsUAAAAASUVORK5CYII="},"0529":function(t,e,a){},"08c3":function(t,e,a){"use strict";a("0529")},1270:function(t,e,a){"use strict";a("6eb7")},"1a98":function(t,e,a){"use strict";a("ce77")},3897:function(t,e,a){},"3ee8":function(t,e,a){t.exports=a.p+"img/full_brand.8e5e2997.png"},"4ea6":function(t,e,a){"use strict";a("c93a")},"4ebe":function(t,e,a){},"4f19":function(t,e,a){"use strict";a("a218")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("Header"),a("v-main",[a("transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1),a("Footer")],1)},r=[],s=(a("b0c0"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",[i("div",{staticClass:"header-title"},[i("a",{staticClass:"vacinometro",attrs:{href:"https://labonline.manaus.am.gov.br/"}},[i("p",[t._v("VACINAÇÃO COVID-19")]),i("b",[t._v("SEMSA MANAUS")])])]),i("a",{attrs:{href:"https://manaus.am.gov.br"}},[i("img",{attrs:{src:a("3ee8")}})])])}],c={},l=c,u=(a("c6ad"),a("2877")),d=Object(u["a"])(l,s,o,!1,null,"c9204188",null),p=d.exports,m=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},f=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("footer",{staticClass:"pa-8"},[i("div",{staticClass:"container"},[i("div",{staticClass:"footer-text"},[i("p",[t._v(" © 2021 - Secretaria Municipal de Saúde - SEMSA ")]),i("p",[t._v(" Desenvolvido pelo Departamento de Tecnologia da Informação - DTI. ")])]),i("div",{staticClass:"footer-images"},[i("a",{attrs:{href:"https://covid19.manaus.am.gov.br/"}},[i("img",{attrs:{src:a("9a07")}})]),i("a",{attrs:{href:"https://semsa.manaus.am.gov.br/"}},[i("img",{attrs:{src:a("0151")}})])])])])}],v={},h=v,g=(a("6cd3"),Object(u["a"])(h,m,f,!1,null,"4517cc6e",null)),b=g.exports,C={name:"App",components:{Header:p,Footer:b},created:function(){localStorage.getItem("token")?this.$store.dispatch("getUser"):localStorage.getItem("token")||"login"===this.$router.history.current.name||this.$router.push({name:"login"})}},_=C,A=a("6544"),x=a.n(A),w=a("7496"),y=a("f6c4"),F=Object(u["a"])(_,n,r,!1,null,null,null),S=F.exports;x()(F,{VApp:w["a"],VMain:y["a"]});var P=a("b6d0"),k=(a("45fc"),a("8c4f")),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("div",{staticClass:"menu mx-auto mt-5"},[a("v-select",{attrs:{solo:"",items:t.menuItems,label:this.$store.state.user.name||"Carregando...",color:"indigo"},on:{change:function(e){return t.handleMenuClick()}},model:{value:t.selectedMenu,callback:function(e){t.selectedMenu=e},expression:"selectedMenu"}})],1),a("ApplicationForm",{attrs:{type:t.type,application:t.application},on:{changeType:function(e){t.type=e}}}),a("ApplicationList",{attrs:{searchCPFMsg:t.searchCPFMsg},on:{onEdit:t.handleEdit,findCPF:t.findCPF}})],1)},E=[],U=a("5530"),M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-form",{ref:"applicationForm",on:{submit:function(e){return e.preventDefault(),t.handleSubmit()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card",{staticClass:"mx-auto",attrs:{width:"600"}},[a("v-card-title",{staticClass:"white--text pa-5 card-title"},[a("v-icon",{attrs:{color:"white"}},[t._v("fa-user")]),a("p",{staticClass:"ml-3 mb-0 "},[t._v(" Dados do cidadão ")])],1),a("v-card-text",{staticClass:"pt-8 px-8"},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],staticClass:"mb-4",attrs:{label:"CPF",disabled:"edit"===t.type,"append-icon":"mdi-alert-circle",hint:t.CPFValidationMsg||"Somente números","persistent-hint":!!t.CPFValidationMsg||!1,inputmode:"numeric",clearable:"",outlined:"",rules:t.validators.cpf},on:{blur:function(e){return t.validateCPF()}},model:{value:t.application.citizen.cpf,callback:function(e){t.$set(t.application.citizen,"cpf",e)},expression:"application.citizen.cpf"}}),a("v-text-field",{staticClass:"mb-4",attrs:{label:"Nome",counter:"45",clearable:"","append-icon":"mdi-alert-circle",outlined:"",rules:t.validators.name},model:{value:t.application.citizen.name,callback:function(e){t.$set(t.application.citizen,"name","string"===typeof e?e.trim():e)},expression:"application.citizen.name"}}),a("v-select",{staticClass:"mb-4",attrs:{label:"Grupo prioritário",items:t.categories,"item-text":"name","item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:t.validators.categories,outlined:""},model:{value:t.application.category_id,callback:function(e){t.$set(t.application,"category_id",e)},expression:"application.category_id"}}),a("v-select",{staticClass:"mb-4",attrs:{label:"Grupo de atendimento",items:t.filteredServicegroups,"item-text":"name","item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:t.validators.servicegroups,outlined:""},model:{value:t.application.servicegroup_id,callback:function(e){t.$set(t.application,"servicegroup_id",e)},expression:"application.servicegroup_id"}}),a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"XX/XX/XXXX",expression:"'XX/XX/XXXX'"}],staticClass:"mb-4",attrs:{label:"Data de nascimento",clearable:"",hint:"somente números",inputmode:"numeric",rules:t.validators.birthday,outlined:""},model:{value:t.application.citizen.birthday,callback:function(e){t.$set(t.application.citizen,"birthday",e)},expression:"application.citizen.birthday"}}),a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"###############",expression:"'###############'"}],staticClass:"mb-2",attrs:{label:"CNS",hint:"Somente números",clearable:"",inputmode:"numeric",rules:t.validators.cns,outlined:""},model:{value:t.application.citizen.cns,callback:function(e){t.$set(t.application.citizen,"cns","string"===typeof e?e.trim():e)},expression:"application.citizen.cns"}})],1),a("v-card-title",{staticClass:"white--text card-title pa-5"},[a("v-icon",{attrs:{color:"white"}},[t._v("fa-syringe")]),a("p",{staticClass:"ml-3 mb-0"},[t._v(" Dados da vacina ")])],1),a("v-card-text",{staticClass:"pt-8 px-8"},[a("v-select",{staticClass:"mb-4",attrs:{label:"Dose",rules:t.validators.dose,outlined:"",items:[{text:1,value:1},{text:2,value:2}],"append-icon":"mdi-alert-circle"},model:{value:t.application.dose,callback:function(e){t.$set(t.application,"dose",e)},expression:"application.dose"}}),a("v-select",{staticClass:"mb-4",attrs:{label:"Local",items:t.locations,"item-text":"name","item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:t.validators.location,outlined:""},model:{value:t.application.location_id,callback:function(e){t.$set(t.application,"location_id",e)},expression:"application.location_id"}}),a("v-autocomplete",{staticClass:"mb-4",attrs:{label:"Vacinador",items:t.vaccinators,"item-text":"name","item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:t.validators.vaccinator,outlined:""},model:{value:t.application.vaccinator_id,callback:function(e){t.$set(t.application,"vaccinator_id",e)},expression:"application.vaccinator_id"}}),a("v-select",{staticClass:"mb-4",attrs:{label:"Lote",items:t.lots,"item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:t.validators.lot,outlined:""},scopedSlots:t._u([{key:"selection",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.name)+" ")]}},{key:"item",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.immunobiological.name)+" - "+t._s(a.name)+" ")]}}]),model:{value:t.application.lot_id,callback:function(e){t.$set(t.application,"lot_id",e)},expression:"application.lot_id"}}),a("v-text-field",{attrs:{label:"Data de vacinação",type:"date",min:"2021-01-19",max:t.today,"append-icon":"mdi-alert-circle",rules:t.validators.application_date,outlined:""},model:{value:t.application.application_date,callback:function(e){t.$set(t.application,"application_date",e)},expression:"application.application_date"}})],1),a("v-card-actions",{staticClass:"flex-column justify-center"},[a("v-btn",{staticClass:"white--text btn mb-4",attrs:{elevation:"2",type:"submit"}},[t._v(" "+t._s("create"===t.type?"Cadastrar":"Editar")+" ")]),"edit"===t.type?a("v-btn",{staticClass:"ml-5",attrs:{elevation:"2"},on:{click:function(e){return t.handleCancel()}}},[t._v(" Cancelar ")]):t._e(),a("div",{staticClass:"message"},[a("p",[t._v(t._s(t.message))])])],1)],1)],1)],1)},V=[],z=(a("99af"),a("4de4"),a("fb6a"),a("4d90"),a("3501"));function j(t){return Object(z["a"])(t)}function L(){var t=new Date,e=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),i=t.getFullYear();return t=i+"-"+a+"-"+e,t}function I(t){t=String(t);var e=t.slice(0,2),a=t.slice(3,5),i=t.slice(6,10);return"".concat(i,"-").concat(a,"-").concat(e)}function D(t){t=String(t);var e=t.slice(0,4),a=t.slice(5,7),i=t.slice(8,10);return"".concat(i,"/").concat(a,"/").concat(e)}a("d3b7");var $=a("bc3a"),T=a.n($),B=a("3d20"),X=a.n(B),N=a("2f62");i["a"].use(N["a"]);var q=new N["a"].Store({strict:!0,state:{user:{id:"",cpf:"",name:"",email:""},user_applications:[]},mutations:{UPDATE_USER:function(t,e){t.user=Object.assign(t.user,e)},UPDATE_USER_APPLICATIONS:function(t,e){t.user_applications=e},ADD_USER_APPLICATION:function(t,e){t.user_applications.unshift(e)}},actions:{getUser:function(t){return Z.get("/user").then((function(e){var a=e.data;t.commit("UPDATE_USER",a)}))},getUserApplications:function(t){var e=localStorage.getItem("user_id");return Z.get("/applications?user_id=".concat(e,"&application_date=").concat(L())).then((function(e){var a=e.data;t.commit("UPDATE_USER_APPLICATIONS",a.data)}))},addUserApplication:function(t,e){var a=Object(U["a"])({},e);a.citizen=Object(U["a"])({},e.citizen),t.commit("ADD_USER_APPLICATION",a)},login:function(t,e){return Z.post("/login",e).then((function(e){var a=e.data;return a.data.successful_login&&(t.commit("UPDATE_USER",a.data.user),localStorage.setItem("token",a.data.access_token),localStorage.setItem("user_id",a.data.user.id)),a}))},logout:function(t){t.commit("UPDATE_USER",{id:"",cpf:"",name:"",email:""}),localStorage.getItem("token")&&window.localStorage.removeItem("token"),localStorage.getItem("user_id")&&window.localStorage.removeItem("user_id")}}}),J=T.a.create({baseURL:"https://smv.manaus.am.gov.br/api"});J.interceptors.request.use((function(t){var e=localStorage.getItem("token");return e&&(t.headers.Authorization="Bearer ".concat(e)),t}),(function(t){return Promise.reject(t)})),J.interceptors.response.use((function(t){return t}),(function(t){return 401===t.response.status&&"login"!==ee.history.current.name&&ee.push({name:"login"}).then((function(){q.dispatch("logout"),X.a.fire({icon:"info",title:"Sessão expirada",text:"A sua sessão expirou. Você foi redirecionado para a página de login.",showConfirmButton:!1,timer:2500})})),Promise.reject(t)}));var Z={get:function(t){return J.get(t)},post:function(t,e){return J.post(t,e)},delete:function(t){return J.delete(t)},put:function(t,e){return J.put(t,e)}},H=a("d4ec"),R=a("bee2"),Q=function(){function t(){Object(H["a"])(this,t)}return Object(R["a"])(t,null,[{key:"required",value:function(t){return function(e){return!!e||t||"Este campo é obrigatório"}}},{key:"email",value:function(){return function(t){return/.+@.+/.test(t)||"E-mail precisa ter um formato válido"}}},{key:"max",value:function(t){return function(e){return!e||e.length<=t||"O número máximo de caracteres é ".concat(t)}}},{key:"min",value:function(t){return function(e){return!e||e.length>=t||"O número mínimo de caracteres é ".concat(t)}}},{key:"len",value:function(t){return function(e){return!e||e.length===t||"O número de caracteres deve ser ".concat(t)}}},{key:"validateCPF",value:function(){return function(t){return!t||j(t)||"Número de CPF inexistente"}}}]),t}(),K={name:"ApplicationForm",props:["type","application"],data:function(){return{valid:null,message:"",CPFValidationMsg:"",checkedCPF:!1,today:L(),locations:[],categories:[],servicegroups:[],lots:[],vaccinators:[],errors:[],validators:{cpf:[Q.required(),Q.len(11),Q.validateCPF()],name:[Q.required(),Q.min(9),Q.max(45)],categories:[Q.required()],servicegroups:[Q.required()],birthday:[Q.len(10)],cns:[Q.len(15)],location:[Q.required()],vaccinator:[Q.required()],lot:[Q.required()],application_date:[Q.required()],dose:[Q.required()]}}},computed:{filteredServicegroups:function(){var t=this;return this.servicegroups?this.servicegroups.filter((function(e){return e.category_id===t.application.category_id})):[]}},methods:{handleSubmit:function(){if(this.$refs.applicationForm.validate(),!this.valid)return this.message="Por favor, preencha os dados corretamente!";this.message="Enviando dados...";var t=this.application.citizen.birthday;t&&(this.application.citizen.birthday=I(t)),"create"===this.type?this.registerApplication():"edit"===this.type&&this.editApplication()},handleCancel:function(){this.$refs.applicationForm.reset(),this.$emit("changeType","create")},registerApplication:function(){var t=this;if(!this.checkedCPF)return this.message="Por favor, aguarde a validação do CPF!";this.application.user_id=localStorage.getItem("user_id"),Z.post("/applications",this.application).then((function(e){var a=e.data;t.application.id=a.data.id,t.application.citizen.id=a.data.citizen_id,console.log(t.application),t.$store.dispatch("addUserApplication",t.application),t.message="",t.CPFValidationMsg="",t.clearForm(),t.$refs.applicationForm.resetValidation(),X.a.fire({icon:"success",title:"Cadastrado com êxito",text:"Os dados registrados com sucesso!",showConfirmButton:!1,timer:1500})})).catch((function(){t.message="",X.a.fire({icon:"error",title:"Erro ao cadastrar",text:"Ocorreu algum erro. Por favor, tente novamente.",showConfirmButton:!1,timer:2e3})}))},editApplication:function(){var t=this;this.application.updated_by=localStorage.getItem("user_id"),Z.put("/applications/".concat(this.application.id),this.application).then((function(){t.message="",t.$refs.applicationForm.reset(),t.$emit("changeType","create"),X.a.fire({icon:"success",title:"Alteração realizada com êxito",text:"Os dados foram atualizados com sucesso!",showConfirmButton:!1,timer:1500})})).catch((function(){t.message="",X.a.fire({icon:"error",title:"Erro ao atualizar",text:"Ocorreu algum erro. Por favor, tente novamente.",showConfirmButton:!1,timer:2e3})}))},validateCPF:function(){var t=this,e=this.application.citizen.cpf;e&&(this.CPFValidationMsg="Verificando CPF...",Z.get("/applications?cpf=".concat(e)).then((function(e){var a=e.data;if(a.data.length>1){var i=D(a.data[1].application_date),n=D(a.data[0].application_date);t.CPFValidationMsg="O portador deste CPF já recebeu as duas doses.\n              1ª dose: ".concat(i,"\n              2ª dose: ").concat(n)}else t.checkedCPF=!0,1===a.data.length?(t.application.dose=2,t.CPFValidationMsg="CPF apto para receber a 2ª dose!"):(t.application.dose=1,t.CPFValidationMsg="CPF apto para receber a 1ª dose!")})).catch((function(){t.CPFValidationMsg="Não foi possível consultar o CPF. Favor recarregar a página e tentar novamente."})))},clearForm:function(){this.application.lot_id="",this.application.servicegroup_id="",this.application.citizen.cpf="",this.application.citizen.cns="",this.application.citizen.name="",this.application.citizen.birthday=""},fetchVaccinators:function(){var t=this;Z.get("/vaccinators").then((function(e){var a=e.data;t.vaccinators=a.data}))},fetchLocations:function(){var t=this;Z.get("/locations").then((function(e){var a=e.data;t.locations=a.data}))},fetchCategories:function(){var t=this;Z.get("/categories").then((function(e){var a=e.data;t.categories=a.data}))},fetchServicegroups:function(){var t=this;Z.get("/servicegroups").then((function(e){var a=e.data;t.servicegroups=a.data}))},fetchLots:function(){var t=this;Z.get("/lots").then((function(e){var a=e.data;t.lots=a.data}))}},created:function(){this.fetchVaccinators(),this.fetchLocations(),this.fetchCategories(),this.fetchServicegroups(),this.fetchLots()}},W=K,G=(a("a04f"),a("c6a6")),Y=a("8336"),tt=a("b0af"),et=a("99d9"),at=a("a523"),it=a("4bd4"),nt=a("132d"),rt=a("b974"),st=a("8654"),ot=Object(u["a"])(W,M,V,!1,null,"b0a93650",null),ct=ot.exports;x()(ot,{VAutocomplete:G["a"],VBtn:Y["a"],VCard:tt["a"],VCardActions:et["a"],VCardText:et["b"],VCardTitle:et["c"],VContainer:at["a"],VForm:it["a"],VIcon:nt["a"],VSelect:rt["a"],VTextField:st["a"]});var lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("v-card",{staticClass:"mx-auto mt-8 mb-8",attrs:{width:"600"}},[a("v-card-title",{staticClass:"white--text pa-5 card-title"},[a("v-icon",{attrs:{color:"white"}},[t._v("fa-laptop")]),a("p",{staticClass:"ml-3 mb-0"},[t._v(" Vacinações digitadas por "+t._s(this.$store.state.user.name)+" ")])],1),a("v-card-text",{staticClass:"pa-8"},[a("h3",[t._v("Buscar vacinações de datas anteriores:")]),a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],staticClass:"mb-4",attrs:{label:"CPF","append-icon":"mdi-send",clearable:"",hint:t.searchCPFMsg||"Somente números","persistent-hint":!!t.searchCPFMsg||!1,inputmode:"numeric",rules:t.validators.cpf,outlined:""},on:{"click:append":function(e){return t.$emit("findCPF",t.cpf)}},model:{value:t.cpf,callback:function(e){t.cpf=e},expression:"cpf"}}),a("div",{staticClass:"font-weight-bold ml-8 mb-2"},[t._v(" Hoje ")]),a("v-timeline",{attrs:{"align-top":"",dense:""}},t._l(t.userApplications,(function(e){return a("v-timeline-item",{key:e.id,attrs:{color:1===e.dose?"#CEB8A1":"#6862A7",small:""}},[a("div",{staticClass:"timeline-content"},[a("div",[a("div",{staticClass:"font-weight-normal"},[a("strong",[t._v(t._s(e.citizen.name))])]),a("div",[t._v("CPF: "+t._s(e.citizen.cpf))]),a("div",[t._v("Dose: "+t._s(e.dose))])]),a("a",{on:{click:function(a){return a.preventDefault(),t.$emit("onEdit",e)}}},[a("v-icon",{staticClass:"ml-7"},[t._v(" far fa-edit ")])],1)])])})),1)],1)],1)],1)},ut=[],dt={props:["searchCPFMsg"],data:function(){return{cpf:"",validators:{cpf:[Q.required(),Q.len(11),Q.validateCPF()]}}},computed:{userApplications:function(){return this.$store.state.user_applications}},mounted:function(){this.$store.dispatch("getUserApplications")}},pt=dt,mt=(a("fad6"),a("8414")),ft=a("1e06"),vt=Object(u["a"])(pt,lt,ut,!1,null,"4c19429a",null),ht=vt.exports;x()(vt,{VCard:tt["a"],VCardText:et["b"],VCardTitle:et["c"],VIcon:nt["a"],VTextField:st["a"],VTimeline:mt["a"],VTimelineItem:ft["a"]});var gt={name:"Home",components:{ApplicationForm:ct,ApplicationList:ht},data:function(){return{searchCPFMsg:"",type:"create",application:{id:"",user_id:"",location_id:"",lot_id:"",category_id:"",servicegroup_id:"",vaccinator_id:"",application_date:"",dose:"",citizen:{cpf:"",cns:"",name:"",birthday:""}},selectedMenu:"",menuItems:[{text:"Deslogar",value:"logout"},{text:"Trocar senha",value:"change-password"},{text:"Alterar dados",value:"update-user-data"}]}},methods:{handleEdit:function(t){console.log(t),this.type="edit",this.application=Object(U["a"])({},t),this.application.citizen=Object(U["a"])({},t.citizen);var e=this.application.citizen.birthday;e&&(this.application.citizen.birthday=D(e))},findCPF:function(t){var e=this;this.searchCPFMsg="Procurando CPF...",Z.get("applications?cpf=".concat(t)).then((function(t){var a=t.data;if(0!==a.data.length){e.application=a.data[0];var i=a.data[0].citizen.birthday;i&&(e.application.citizen.birthday=D(i)),e.searchCPFMsg="",e.type="edit"}else e.searchCPFMsg="Esse CPF não consta em nossa base"}))},handleMenuClick:function(){"logout"===this.selectedMenu&&(this.$store.dispatch("logout"),this.$router.push({name:"login"})),"change-password"===this.selectedMenu&&this.$router.push({name:"updatepassword"}),"update-user-data"===this.selectedMenu&&this.$router.push({name:"updateuserdata"}),this.selectedMenu=""}}},bt=gt,Ct=(a("08c3"),Object(u["a"])(bt,O,E,!1,null,"740e9ad4",null)),_t=Ct.exports;x()(Ct,{VContainer:at["a"],VSelect:rt["a"]});var At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":!0},on:{"update:active":function(e){t.isLoading=e}}}),t.errors.length?a("div",{staticClass:"validation-errors"},[a("b",[t._v("Por favor, corrija o(s) seguinte(s) erro(s):")]),a("ol",t._l(t.errors,(function(e,i){return a("li",{key:i},[t._v(t._s(e))])})),0)]):t._e(),a("form",[a("FormField",{attrs:{label:"Senha Antiga",required:!0,name:"old-password"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],attrs:{type:"password",name:"old-password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),a("FormField",{attrs:{label:"Nova Senha",required:!0,name:"new-password"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.new_password,expression:"user.new_password"}],attrs:{type:"password",name:"new-password"},domProps:{value:t.user.new_password},on:{input:function(e){e.target.composing||t.$set(t.user,"new_password",e.target.value)}}})]),a("FormField",{attrs:{label:"Confirmar Senha",required:!0,name:"confirm-password"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.new_confirm_password,expression:"user.new_confirm_password"}],attrs:{type:"password",name:"confirm-password"},domProps:{value:t.user.new_confirm_password},on:{input:function(e){e.target.composing||t.$set(t.user,"new_confirm_password",e.target.value)}}})]),a("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.updatePassword()}}},[t._v(" Atualizar ")]),a("button",{staticClass:"btn btn-danger",on:{click:function(e){return e.preventDefault(),t.back()}}},[t._v("Cancelar")])],1)],1)},xt=[],wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-form"},[a("label",{attrs:{for:t.name}},[t._v(t._s(t.label)+" "),t.required?a("span",[t._v("*")]):t._e()]),t._t("default")],2)},yt=[],Ft={props:{label:{type:String,required:!0},name:{type:String,required:!0},required:{type:Boolean,default:!1}}},St=Ft,Pt=(a("1a98"),Object(u["a"])(St,wt,yt,!1,null,"9282a50c",null)),kt=Pt.exports,Ot=a("9062"),Et=a.n(Ot),Ut=(a("e40d"),{name:"updatepassword",components:{FormField:kt,Loading:Et.a},data:function(){return{errors:[],user:{},isLoading:!1}},methods:{updatePassword:function(){var t=this;this.isLoading=!0,Z.put("/users/updatepassword",this.user).then((function(e){var a=e.data;a.data.errors.length>0?(t.errors=a.data.errors,t.isLoading=!1):(t.errors=[],X.a.fire({icon:"success",title:"Alteração realizada com êxito",text:"Os dados foram atualizados com sucesso!",showConfirmButton:!1,timer:1500}),t.$router.push("/"))}))},back:function(){this.$router.go(-1)}}}),Mt=Ut,Vt=(a("f6b6"),Object(u["a"])(Mt,At,xt,!1,null,"724239cc",null)),zt=Vt.exports,jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":!0},on:{"update:active":function(e){t.isLoading=e}}}),t.errors.length?a("div",{staticClass:"validation-errors"},[a("b",[t._v("Por favor, corrija o(s) seguinte(s) erro(s):")]),a("ol",t._l(t.errors,(function(e,i){return a("li",{key:i},[t._v(t._s(e))])})),0)]):t._e(),a("UserForm",{attrs:{type:"edit",user:t.user}}),a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.updateUserData()}}},[t._v(" Atualizar ")]),a("button",{staticClass:"btn btn-danger",on:{click:function(e){return e.preventDefault(),t.back()}}},[t._v("Cancelar")])])],1)},Lt=[],It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",["edit"==t.type?a("h1",[t._v("Atualizar Dados")]):a("h1",[t._v("Cadastrar Usuário")]),a("div",{staticClass:"fields-container"},[a("FormField",{attrs:{label:"Nome",required:!0,name:"name"}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.user.name,expression:"user.name",modifiers:{trim:!0}}],attrs:{type:"text",name:"name",disabled:"type=='edit'"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("FormField",{attrs:{label:"CPF",required:!0,name:"cpf"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.cpf,expression:"user.cpf"}],attrs:{type:"text",name:"cpf",disabled:"type=='edit'"},domProps:{value:t.user.cpf},on:{input:function(e){e.target.composing||t.$set(t.user,"cpf",e.target.value)}}})]),a("FormField",{attrs:{label:"Email",required:!0,name:"email"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],attrs:{type:"text",name:"email",inputmode:"text"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})])],1)])},Dt=[],$t={name:"UserForm",props:["type","user"],components:{FormField:kt},data:function(){return{}}},Tt=$t,Bt=(a("4ea6"),Object(u["a"])(Tt,It,Dt,!1,null,"25fac4da",null)),Xt=Bt.exports,Nt={name:"updateuserdata",components:{Loading:Et.a,UserForm:Xt},data:function(){return{errors:[],user:{},isLoading:!1,edit:!0}},methods:{updateUserData:function(){var t=this;this.isLoading=!0,Z.put("/users/updateuserdata",this.user).then((function(e){var a=e.data;a.data.errors.length>0?(t.errors=a.data.errors,t.isLoading=!1):(t.errors=[],X.a.fire({icon:"success",title:"Alteração realizada com êxito",text:"Os dados foram atualizados com sucesso!",showConfirmButton:!1,timer:1500}),t.$router.push("/"))}))},back:function(){this.$router.go(-1)}},created:function(){var t=this;this.isLoading=!0;var e=this;this.$store.dispatch("getUser").then((function(){e.user=Object.assign({},t.$store.state.user),t.isLoading=!1}))}},qt=Nt,Jt=(a("4f19"),Object(u["a"])(qt,jt,Lt,!1,null,"7c5bdef6",null)),Zt=Jt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-form",{ref:"loginForm",on:{submit:function(e){return e.preventDefault(),t.handleSubmit()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card",{staticClass:"mx-auto pt-5",attrs:{width:"500"}},[a("v-card-title",{staticClass:"white--text pa-5 card-title"},[a("v-icon",{attrs:{color:"white"}},[t._v("fa-user")]),a("p",{staticClass:"ml-3 mb-0 "},[t._v(" Entrar ")])],1),a("v-card-text",{staticClass:"pt-8 px-8"},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],staticClass:"mb-4",attrs:{label:"CPF",hint:"Somente números",inputmode:"numeric",clearable:"",outlined:"",rules:t.validators.cpf},model:{value:t.credentials.cpf,callback:function(e){t.$set(t.credentials,"cpf",e)},expression:"credentials.cpf"}}),a("v-text-field",{attrs:{label:"Senha",clearable:"",outlined:"",rules:t.validators.password,type:"password"},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}})],1),a("v-card-actions",{staticClass:"flex-column justify-center"},[a("v-btn",{staticClass:"white--text btn mb-4",attrs:{elevation:"2",type:"submit"}},[t._v(" Logar ")]),a("div",{staticClass:"message"},[a("p",[t._v(t._s(t.message))])])],1)],1)],1)],1)},Rt=[],Qt={name:"Login",data:function(){return{valid:!1,message:"",credentials:{cpf:"",password:""},validators:{cpf:[Q.required(),Q.len(11)],password:[Q.required()]}}},methods:{handleSubmit:function(){var t=this;if(this.$refs.loginForm.validate(),!this.valid)return this.message="Por favor, preencha os dados corretamente!";this.message="Verificando credenciais...",this.$store.dispatch("login",this.credentials).then((function(e){e.data.successful_login?t.$router.push({name:"home"}):t.message="Credenciais inválidas!"})).catch((function(){t.message="Não foi possível se conectar com o servidor :("}))}}},Kt=Qt,Wt=(a("1270"),Object(u["a"])(Kt,Ht,Rt,!1,null,"1c518336",null)),Gt=Wt.exports;x()(Wt,{VBtn:Y["a"],VCard:tt["a"],VCardActions:et["a"],VCardText:et["b"],VCardTitle:et["c"],VContainer:at["a"],VForm:it["a"],VIcon:nt["a"],VTextField:st["a"]});var Yt=void 0;i["a"].use(k["a"]);var te=new k["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:_t},{path:"/alterarsenha",name:"updatepassword",component:zt},{path:"/alterardados",name:"updateuserdata",component:Zt},{path:"/login",name:"login",component:Gt}],scrollBehavior:function(){return window.scrollTo({top:0,behavior:"smooth"})}});te.beforeEach((function(t,e,a){t.matched.some((function(t){return t.meta.login}))?window.localStorage.token?a():X.a.fire({icon:"info",title:"Sessão expirada",text:"A sua sessão expirou. Você será redirecionado para a página de login em instantes.",showConfirmButton:!1,timer:2500}).then((function(){Yt.$store.dispatch("logout"),a("/login")})):a()}));var ee=te,ae=a("f309");i["a"].use(ae["a"]);var ie=new ae["a"]({});i["a"].config.productionTip=!1,i["a"].use(P["a"]),new i["a"]({router:ee,store:q,vuetify:ie,render:function(t){return t(S)}}).$mount("#app")},"6cd3":function(t,e,a){"use strict";a("3897")},"6eb7":function(t,e,a){},7682:function(t,e,a){},"9a07":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHcAAAArCAMAAAB1q+c0AAAASFBMVEVHcEz///////////////////////////////////////////////////////////////////////////////////8Acrv///+8vuJ9AAAAFnRSTlMAYLAwQKAQwIC/4CBwB3+RuPDQUO8/Ui5SjgAAA0ZJREFUWMPF19t24ygQBdDDtQpQW6PbOv//p/NQSLY77ViZXhrzEDsYsSUKKAR+pET8obLqxSX92aX8wqUlvnCvhl+6F8Ov3Wvhb1z+8+sz7pXwt+4XuI2VLAuAdit+yACG4hsAIBUFhlJK8Yu19kUB6K0XRPt0793f4LhabUYkSa4OEFKtIwog1kABwJFsuPcO3b+8d5/gtpKzjtOAhmQ/LxByzQBSd+e4zNa1JzkAIjJxEhEoKSIynnEf4USOAIC8ug5XCEkHNHZXACUz0MiJFUCvBdTuB6fcB7iSGQAwkDschWQFdHfnbZtZrdFAhmd327Ytn3PvMO1yQzo8COeJEZX+Ht8pAKhMmUzPriWEc+4Bk/Pd7bATSmJZWNXcSSayZARyQeL6F+4OH+O88ICbUAI5c9Ajvgs5IJGlVNL91/je4ZH0GWgNdYcFQoGQzHcXpOa+5Oj/xjU4T2QthWsOU4czhAJHJug+rxZPOke6GGMi26NbSinlB67BwZ6TAUFImzS2cjTsrqUUiM2FYEv4Kb78iduf2HmRMQBAizEDgFPXR04d4LyIjBFQjbbkdDnaxH7W+JFrsJmX54WnokAkb/+3axEeq/vSRw4XuraU4m04NHcbhwygxZSXlpG3DQDCltvWgLht7UkKALLtkj+cz4Ane2c2txMaUuHqvSLbVjQxKtUm77pHJd9WCpBIpvwD1xvbLLUByCurqgSMfemEgJkKBE4wt0q1bcO2OgqUk0wcz7v9aijnntoGThkAct5P+s1W8MDUXQW078bQ5CmYuSDaln3K9fdMGCZLbd4yDZrsjdIQSMDT3V0bgn7L5sIidcY92IUzxj21WYch7a2WgIlLJvODK0yI2xbMHbmW2YbghOsfDxx1tnEae07Uwx0AZXJMeHArNdqJQKnInqxnn/fO7qFcsO8gbj/h9UzF1TPgKb4BMcZeZxOjnopvuq/Agf742485HsFg8YMtM8Hu1rI+XK5UwN2S3fZb94GFSgTQxE47g5BVgVG9TE77qqQ7XJKT4sklObkz+0Z6v+Pl7FDb1/oWY3j6twGuZ6l3bvrMe0r6zHvZ+Jn30CvZb9xL2dfutexL92L2lVvLxWVmhHykhH8BWB/EwHHvd74AAAAASUVORK5CYII="},a04f:function(t,e,a){"use strict";a("d6d4")},a218:function(t,e,a){},a2dd:function(t,e,a){},c6ad:function(t,e,a){"use strict";a("a2dd")},c93a:function(t,e,a){},ce77:function(t,e,a){},d6d4:function(t,e,a){},f6b6:function(t,e,a){"use strict";a("4ebe")},fad6:function(t,e,a){"use strict";a("7682")}});
//# sourceMappingURL=app.eabfbc60.js.map