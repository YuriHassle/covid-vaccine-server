(function(t){function e(e){for(var i,r,s=e[0],c=e[1],l=e[2],p=0,d=[];p<s.length;p++)r=s[p],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],i=!0,s=1;s<a.length;s++){var c=a[s];0!==n[c]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},n={app:0},o=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},1036:function(t,e,a){},"14e1":function(t,e,a){"use strict";a("d308")},"1a98":function(t,e,a){"use strict";a("ce77")},"38fa":function(t,e,a){"use strict";a("4ff8")},"4ea6":function(t,e,a){"use strict";a("c93a")},"4ebe":function(t,e,a){},"4f19":function(t,e,a){"use strict";a("a218")},"4ff8":function(t,e,a){},"51e1":function(t,e,a){"use strict";a("e074")},5322:function(t,e,a){"use strict";a("9a72")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Header"),a("main",{attrs:{id:"main"}},[a("transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1),a("Footer")],1)},o=[],r=(a("b0c0"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",[i("div",{staticClass:"header"},[i("img",{attrs:{src:a("8271"),alt:"PREFEITURA DE MANAUS  - SEMSA"}})]),i("div",{staticClass:"text-header"},[i("p",[t._v("VACINAÇÃO COVID19 - SEMSA MANAUS")])])])}],c={},l=c,u=(a("d0d2"),a("2877")),p=Object(u["a"])(l,r,s,!1,null,"25609f92",null),d=p.exports,m=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",[a("div",{staticClass:"footer-container"},[a("div",{staticClass:"footer-section"},[a("h3",[t._v("Endereço")]),a("p",[t._v(" Avenida Mário Ypiranga Monteiro, 1695 - Adrianópolis ")]),a("p",[t._v(" Cep: 69057-001 ")])]),a("div",{staticClass:"footer-section"},[a("h3",[t._v("Link")]),a("p",[a("a",{attrs:{href:"https://semsa.manaus.am.gov.br/"}},[t._v("Secretaria Municipal de Saúde de Manaus")])]),a("p",[a("a",{attrs:{href:"http://www.manaus.am.gov.br/"}},[t._v("Prefeitura de Manaus")])])])]),a("div",{staticClass:"copyright"},[a("p",[t._v(" © 2021 - Secretaria Municipal de Saúde - SEMSA ")]),a("p",[t._v("Desenvolvido pelo Departamento de Tecnologia da Informação - DTI")])])])}],v={},g=v,h=(a("38fa"),Object(u["a"])(g,m,f,!1,null,"504ab9e0",null)),_=h.exports,b={components:{Header:d,Footer:_},created:function(){localStorage.getItem("token")?this.$store.dispatch("getUser"):localStorage.getItem("token")||"login"===this.$router.history.current.name||this.$router.push({name:"login"})}},C=b,F=(a("034f"),Object(u["a"])(C,n,o,!1,null,null,null)),y=F.exports,w=a("b6d0"),P=(a("45fc"),a("8c4f")),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("div",{staticClass:"btn-container"},[a("button",{staticClass:"btn btn-secondary",on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v(" Deslogar ")]),a("button",{staticClass:"btn btn-secondary",on:{click:function(e){return e.preventDefault(),t.$router.push({name:"updatepassword"})}}},[t._v(" Trocar Senha ")]),a("button",{staticClass:"btn btn-secondary",on:{click:function(e){return e.preventDefault(),t.$router.push({name:"updateuserdata"})}}},[t._v(" Atualizar Dados ")])]),a("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.edit(e)}}},[t._v("Editar")]),a("ApplicationForm",{ref:"applicationForm",attrs:{type:"create",application:t.application,CPFValidationMsg:t.CPFValidationMsg,checkedCPF:t.checkedCPF},on:{validateCPF:function(e){return t.validateCPF()}}},[a("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.saveApplication(e)}}},[t._v(" Salvar ")])]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.message)+" ")])],1)},$=[],z=(a("99af"),a("d3b7"),a("bc3a")),S=a.n(z),k=a("3d20"),A=a.n(k),M=a("2f62");i["a"].use(M["a"]);var E=new M["a"].Store({strict:!0,state:{user:{id:"",cpf:"",name:"",email:""}},mutations:{UPDATE_USER:function(t,e){t.user=Object.assign(t.user,e)}},actions:{login:function(t,e){return D.post("/login",e).then((function(e){var a=e.data;return a.data.successful_login&&(t.commit("UPDATE_USER",a.data.user),localStorage.setItem("token",a.data.access_token)),a}))},logout:function(t){t.commit("UPDATE_USER",{id:"",cpf:"",name:"",email:""}),localStorage.getItem("token")&&window.localStorage.removeItem("token")},getUser:function(t){return D.get("/user").then((function(e){var a=e.data;t.commit("UPDATE_USER",a)}))}}}),V=S.a.create({baseURL:"https://smv.manaus.am.gov.br/api"});V.interceptors.request.use((function(t){var e=localStorage.getItem("token");return e&&(t.headers.Authorization="Bearer ".concat(e)),t}),(function(t){return Promise.reject(t)})),V.interceptors.response.use((function(t){return t}),(function(t){return 401===t.response.status&&"login"!==Nt.history.current.name&&Nt.push({name:"login"}).then((function(){E.dispatch("logout"),A.a.fire({icon:"info",title:"Sessão expirada",text:"A sua sessão expirou. Você foi redirecionado para a página de login.",showConfirmButton:!1,timer:2500})})),Promise.reject(t)}));var D={get:function(t){return V.get(t)},post:function(t,e){return V.post(t,e)},delete:function(t){return V.delete(t)},put:function(t,e){return V.put(t,e)}},O=(a("fb6a"),a("4d90"),a("3501"));function N(t){return Object(O["a"])(t)}function j(){var t=new Date,e=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),i=t.getFullYear();return t=i+"-"+a+"-"+e,t}function L(t){t=String(t);var e=t.slice(0,2),a=t.slice(3,5),i=t.slice(6,10);return"".concat(i,"-").concat(a,"-").concat(e)}function q(t){t=String(t);var e=t.slice(0,4),a=t.slice(5,7),i=t.slice(8,10);return"".concat(i,"/").concat(a,"/").concat(e)}var U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",["edit"===t.type?a("div",{staticClass:"fields-container"},[a("h3",[t._v("Clique em buscar para carregar os dados")]),a("FormField",{attrs:{label:"CPF",required:!0,name:"cpf"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.application.citizen.cpf,expression:"application.citizen.cpf"}],attrs:{type:"text",name:"cpf",minlength:"11",maxlength:"11",pattern:"[0-9]*",inputmode:"numeric",placeholder:"somente números"},domProps:{value:t.application.citizen.cpf},on:{input:function(e){e.target.composing||t.$set(t.application.citizen,"cpf",e.target.value)}}}),t.CPFValidationMsg?a("div",{staticClass:"message"},[t._v(" "+t._s(t.CPFValidationMsg)+" ")]):t._e(),a("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.$emit("findCPF")}}},[t._v("Buscar")])])],1):t._e(),a("div",{staticClass:"fields-container"},[a("h3",[t._v("Dados do cidadão")]),"create"===t.type?a("FormField",{attrs:{label:"CPF",required:!0,name:"cpf"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.application.citizen.cpf,expression:"application.citizen.cpf"}],attrs:{type:"text",name:"cpf",minlength:"11",maxlength:"11",pattern:"[0-9]*",inputmode:"numeric",placeholder:"somente números"},domProps:{value:t.application.citizen.cpf},on:{focusout:function(e){return t.$emit("validateCPF")},input:function(e){e.target.composing||t.$set(t.application.citizen,"cpf",e.target.value)}}}),t.CPFValidationMsg?a("div",{staticClass:"message"},[t._v(" "+t._s(t.CPFValidationMsg)+" ")]):t._e()]):t._e(),a("FormField",{attrs:{label:"CNS",name:"cns"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.application.citizen.cns,expression:"application.citizen.cns"}],attrs:{type:"text",name:"cns",minlength:"15",maxlength:"15",pattern:"[0-9]*",inputmode:"numeric",placeholder:"somente números"},domProps:{value:t.application.citizen.cns},on:{input:function(e){e.target.composing||t.$set(t.application.citizen,"cns",e.target.value)}}})]),a("FormField",{attrs:{label:"Nome",required:!0,name:"name"}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.application.citizen.name,expression:"application.citizen.name",modifiers:{trim:!0}}],attrs:{type:"text",name:"name",minlength:"9",maxlength:"45"},domProps:{value:t.application.citizen.name},on:{input:function(e){e.target.composing||t.$set(t.application.citizen,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("FormField",{attrs:{label:"Data de Nascimento",name:"birthday"}},[a("input",{directives:[{name:"mask",rawName:"v-mask",value:"XX/XX/XXXX",expression:"'XX/XX/XXXX'"},{name:"model",rawName:"v-model",value:t.application.citizen.birthday,expression:"application.citizen.birthday"}],attrs:{type:"text",name:"birthday",placeholder:"somente números",inputmode:"numeric"},domProps:{value:t.application.citizen.birthday},on:{input:function(e){e.target.composing||t.$set(t.application.citizen,"birthday",e.target.value)}}})]),a("FormField",{attrs:{label:"Grupo prioritário",required:!0,name:"category"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.application.category_id,expression:"application.category_id"}],staticClass:"select-form",attrs:{name:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.application,"category_id",e.target.multiple?a:a[0])}}},t._l(t.categories,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),0)]),a("FormField",{attrs:{label:"Grupo de atendimento",required:!0,name:"service-group"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.application.servicegroup_id,expression:"application.servicegroup_id"}],staticClass:"select-form",attrs:{name:"service-group"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.application,"servicegroup_id",e.target.multiple?a:a[0])}}},t._l(t.filteredServicegroups,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),0)])],1),a("div",{staticClass:"fields-container"},[a("h3",[t._v("Dados da vacina")]),a("FormField",{attrs:{label:"Local",required:!0,name:"location"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.application.location_id,expression:"application.location_id"}],staticClass:"select-form",attrs:{name:"location"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.application,"location_id",e.target.multiple?a:a[0])}}},t._l(t.locations,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),0)]),a("FormField",{attrs:{label:"Vacinador",required:!0,name:"vaccinator"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.application.vaccinator_id,expression:"application.vaccinator_id"}],staticClass:"select-form",attrs:{name:"vaccinator"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.application,"vaccinator_id",e.target.multiple?a:a[0])}}},t._l(t.vaccinators,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),0)]),a("FormField",{attrs:{label:"Dose",required:!0,name:"dose"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.application.dose,expression:"application.dose"}],staticClass:"select-form",attrs:{name:"dose"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.application,"dose",e.target.multiple?a:a[0])}}},t._l([1,2],(function(e,i){return a("option",{key:i,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0)]),a("FormField",{attrs:{label:"Lote",required:!0,name:"lot"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.application.lot_id,expression:"application.lot_id"}],staticClass:"select-form",attrs:{name:"lot"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.application,"lot_id",e.target.multiple?a:a[0])}}},t._l(t.lots,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.immunobiological.name)+" - "+t._s(e.name)+" ")])})),0)]),a("FormField",{attrs:{label:"Data de vacinação",required:!0,name:"application-date"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.application.application_date,expression:"application.application_date"}],attrs:{type:"date",name:"application-date",min:"2021-01-19",max:t.today},domProps:{value:t.application.application_date},on:{input:function(e){e.target.composing||t.$set(t.application,"application_date",e.target.value)}}})])],1),t.errors.length?a("div",{staticClass:"validation-errors"},[a("b",[t._v("Por favor, corrija o(s) seguinte(s) erro(s):")]),a("ol",t._l(t.errors,(function(e,i){return a("li",{key:i},[t._v(t._s(e))])})),0)]):t._e(),t._t("default")],2)},X=[],I=(a("4de4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-form"},[a("label",{attrs:{for:t.name}},[t._v(t._s(t.label)+" "),t.required?a("span",[t._v("*")]):t._e()]),t._t("default")],2)}),B=[],T={props:{label:{type:String,required:!0},name:{type:String,required:!0},required:{type:Boolean,default:!1}}},R=T,H=(a("1a98"),Object(u["a"])(R,I,B,!1,null,"9282a50c",null)),G=H.exports,J={name:"ApplicationForm",props:["type","application","isValidData","CPFValidationMsg","checkedCPF"],components:{FormField:G},data:function(){return{today:j(),locations:null,categories:null,servicegroups:null,lots:null,vaccinators:null,errors:[]}},computed:{filteredServicegroups:function(){var t=this;return this.servicegroups?this.servicegroups.filter((function(e){return e.category_id===t.application.category_id})):[]}},methods:{isDataValidated:function(){this.errors=[];for(var t=[{name:"'sala de vacina'",value:this.application.location_id},{name:"'CPF do cidadão'",value:this.application.citizen.cpf},{name:"'nome do cidadão'",value:this.application.citizen.name},{name:"'lote'",value:this.application.lot_id},{name:"'vacinador'",value:this.application.vaccinator_id},{name:"'grupo prioritário'",value:this.application.category_id},{name:"'grupo de atendimento'",value:this.application.servicegroup_id},{name:"'data de vacinação'",value:this.application.application_date}],e=0,a=t;e<a.length;e++){var i=a[e];i.value||this.errors.push("Preencha o campo ".concat(i.name))}"create"!==this.type||this.checkedCPF||this.errors.push("Verifique a validade do CPF informado");var n=this.application.citizen.birthday;n&&10!==n.length&&""!==n&&this.errors.push("Informe um data de nascimento válida");var o=this.application.citizen.name;o.length<9&&""!==o&&this.errors.push("Informe um nome com no mínimo 9 caracteres");var r=this.application.citizen.cns;return r&&15!==r.length&&""!==r&&this.errors.push("Informe um CNS com 15 caracteres"),!this.errors.length},clearForm:function(){this.application.lot_id="",this.application.category_id="",this.application.servicegroup_id="",this.application.citizen.cpf="",this.application.citizen.cns="",this.application.citizen.name="",this.application.citizen.birthday=""},fetchVaccinators:function(){var t=this;D.get("/vaccinators").then((function(e){var a=e.data;t.vaccinators=a.data}))},fetchLocations:function(){var t=this;D.get("/locations").then((function(e){var a=e.data;t.locations=a.data}))},fetchCategories:function(){var t=this;D.get("/categories").then((function(e){var a=e.data;t.categories=a.data}))},fetchServicegroups:function(){var t=this;D.get("/servicegroups").then((function(e){var a=e.data;t.servicegroups=a.data}))},fetchLots:function(){var t=this;D.get("/lots").then((function(e){var a=e.data;t.lots=a.data}))}},created:function(){this.fetchVaccinators(),this.fetchLocations(),this.fetchCategories(),this.fetchServicegroups(),this.fetchLots()}},Y=J,K=(a("14e1"),Object(u["a"])(Y,U,X,!1,null,"0c60b856",null)),Q=K.exports,W={name:"Home",components:{ApplicationForm:Q},data:function(){return{application:{user_id:"",location_id:"",lot_id:"",category_id:"",servicegroup_id:"",vaccinator_id:"",application_date:"",dose:"",citizen:{cpf:"",cns:"",name:"",birthday:""}},message:"",CPFValidationMsg:"",checkedCPF:!1}},methods:{saveApplication:function(){var t=this;if(this.$refs.applicationForm.isDataValidated()){this.message="Enviando dados...";var e=this.application.citizen.birthday;e&&(this.application.citizen.birthday=L(e)),this.application.user_id=this.$store.state.user.id,D.post("/applications",this.application).then((function(){t.message="",t.CPFValidationMsg="",t.$refs.applicationForm.clearForm(),A.a.fire({icon:"success",title:"Cadastrado com êxito",text:"Os dados registrados com sucesso!",showConfirmButton:!1,timer:1500})})).catch((function(){t.message="",A.a.fire({icon:"error",title:"Erro ao cadastrar",text:"Ocorreu algum erro. Por favor, tente novamente.",showConfirmButton:!1,timer:2e3})}))}},validateCPF:function(){var t=this,e=this.application.citizen.cpf;0===e.length?this.CPFValidationMsg="O campo CPF é obrigatório":(this.CPFValidationMsg="Verificando CPF...",N(e)?D.get("/applications?cpf=".concat(e)).then((function(a){var i=a.data;if(0!==i.data.length){var n=q(i.data[0].application_date);t.CPFValidationMsg="CPF inválido: o portador do CPF ".concat(e," já foi vacinado em ").concat(n)}else t.checkedCPF=!0,t.CPFValidationMsg="CPF válido!"})).catch((function(){t.CPFValidationMsg="Não foi possível consultar o CPF. Favor recarregar a página e tentar novamente."})):this.CPFValidationMsg="CPF inválido: número inexistente")},logout:function(){this.$store.dispatch("logout"),this.$router.push({name:"login"})},edit:function(){this.$router.push({name:"edit"})}}},Z=W,tt=(a("5322"),Object(u["a"])(Z,x,$,!1,null,"be8c46ec",null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("h1",[t._v("Editar dados")]),a("button",{staticClass:"btn",on:{click:function(e){return t.$router.push({name:"home"})}}},[t._v("Voltar")]),a("ApplicationForm",{ref:"applicationForm",attrs:{type:"edit",application:t.application,CPFValidationMsg:t.CPFValidationMsg},on:{findCPF:function(e){return t.findCPF()}}},[a("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.updateApplication(e)}}},[t._v(" Atualizar ")])]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.message)+" ")])],1)},it=[],nt={name:"Home",components:{ApplicationForm:Q},data:function(){return{application:{user_id:"",location_id:"",lot_id:"",category_id:"",servicegroup_id:"",vaccinator_id:"",application_date:"",dose:"",citizen:{cpf:"",cns:"",name:"",birthday:""}},message:"",CPFValidationMsg:"",checkedCPF:!1}},methods:{updateApplication:function(){var t=this;if(this.$refs.applicationForm.isDataValidated()){this.message="Enviando dados...";var e=this.application.citizen.birthday;e&&(this.application.citizen.birthday=L(e)),this.application.updated_by=this.$store.state.user.id,D.put("/applications/".concat(this.application.id),this.application).then((function(){t.message="",t.$refs.applicationForm.clearForm(),A.a.fire({icon:"success",title:"Alteração realizada com êxito",text:"Os dados foram atualizados com sucesso!",showConfirmButton:!1,timer:1500})})).catch((function(){t.message="",A.a.fire({icon:"error",title:"Erro ao atualizar",text:"Ocorreu algum erro. Por favor, tente novamente.",showConfirmButton:!1,timer:2e3})}))}},findCPF:function(){var t=this,e=this.application.citizen.cpf;e?N(e)?(this.CPFValidationMsg="Aguarde, procurando CPF...",D.get("applications?cpf=".concat(e)).then((function(e){var a=e.data;if(0!==a.data.length){t.application=a.data[0];var i=a.data[0].citizen.birthday;i&&(t.application.citizen.birthday=q(i)),t.CPFValidationMsg=""}else t.CPFValidationMsg="Esse CPF não consta em nossa base"}))):this.CPFValidationMsg="CPF inválido: número inexistente":this.CPFValidationMsg="Informe um número de CPF para realizar a busca"}}},ot=nt,rt=(a("51e1"),Object(u["a"])(ot,at,it,!1,null,"333341db",null)),st=rt.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":!0},on:{"update:active":function(e){t.isLoading=e}}}),t.errors.length?a("div",{staticClass:"validation-errors"},[a("b",[t._v("Por favor, corrija o(s) seguinte(s) erro(s):")]),a("ol",t._l(t.errors,(function(e,i){return a("li",{key:i},[t._v(t._s(e))])})),0)]):t._e(),a("form",[a("FormField",{attrs:{label:"Senha Antiga",required:!0,name:"old-password"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],attrs:{type:"password",name:"old-password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),a("FormField",{attrs:{label:"Nova Senha",required:!0,name:"new-password"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.new_password,expression:"user.new_password"}],attrs:{type:"password",name:"new-password"},domProps:{value:t.user.new_password},on:{input:function(e){e.target.composing||t.$set(t.user,"new_password",e.target.value)}}})]),a("FormField",{attrs:{label:"Confirmar Senha",required:!0,name:"confirm-password"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.new_confirm_password,expression:"user.new_confirm_password"}],attrs:{type:"password",name:"confirm-password"},domProps:{value:t.user.new_confirm_password},on:{input:function(e){e.target.composing||t.$set(t.user,"new_confirm_password",e.target.value)}}})]),a("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.updatePassword()}}},[t._v(" Atualizar ")]),a("button",{staticClass:"btn btn-danger",on:{click:function(e){return e.preventDefault(),t.back()}}},[t._v("Cancelar")])],1)],1)},lt=[],ut=a("9062"),pt=a.n(ut),dt=(a("e40d"),{name:"updatepassword",components:{FormField:G,Loading:pt.a},data:function(){return{errors:[],user:{},isLoading:!1}},methods:{updatePassword:function(){var t=this;this.isLoading=!0,D.put("/users/updatepassword",this.user).then((function(e){var a=e.data;a.data.errors.length>0?(t.errors=a.data.errors,t.isLoading=!1):(t.errors=[],A.a.fire({icon:"success",title:"Alteração realizada com êxito",text:"Os dados foram atualizados com sucesso!",showConfirmButton:!1,timer:1500}),t.$router.push("/"))}))},back:function(){this.$router.go(-1)}}}),mt=dt,ft=(a("f6b6"),Object(u["a"])(mt,ct,lt,!1,null,"724239cc",null)),vt=ft.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":!0},on:{"update:active":function(e){t.isLoading=e}}}),t.errors.length?a("div",{staticClass:"validation-errors"},[a("b",[t._v("Por favor, corrija o(s) seguinte(s) erro(s):")]),a("ol",t._l(t.errors,(function(e,i){return a("li",{key:i},[t._v(t._s(e))])})),0)]):t._e(),a("UserForm",{attrs:{type:"edit",user:t.user}}),a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.updateUserData()}}},[t._v(" Atualizar ")]),a("button",{staticClass:"btn btn-danger",on:{click:function(e){return e.preventDefault(),t.back()}}},[t._v("Cancelar")])])],1)},ht=[],_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",["edit"==t.type?a("h1",[t._v("Atualizar Dados")]):a("h1",[t._v("Cadastrar Usuário")]),a("div",{staticClass:"fields-container"},[a("FormField",{attrs:{label:"Nome",required:!0,name:"name"}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.user.name,expression:"user.name",modifiers:{trim:!0}}],attrs:{type:"text",name:"name",disabled:"type=='edit'"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("FormField",{attrs:{label:"CPF",required:!0,name:"cpf"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.cpf,expression:"user.cpf"}],attrs:{type:"text",name:"cpf",disabled:"type=='edit'"},domProps:{value:t.user.cpf},on:{input:function(e){e.target.composing||t.$set(t.user,"cpf",e.target.value)}}})]),a("FormField",{attrs:{label:"Email",required:!0,name:"email"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],attrs:{type:"text",name:"email",inputmode:"text"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})])],1)])},bt=[],Ct={name:"UserForm",props:["type","user"],components:{FormField:G},data:function(){return{}}},Ft=Ct,yt=(a("4ea6"),Object(u["a"])(Ft,_t,bt,!1,null,"25fac4da",null)),wt=yt.exports,Pt={name:"updateuserdata",components:{Loading:pt.a,UserForm:wt},data:function(){return{errors:[],user:{},isLoading:!1,edit:!0}},methods:{updateUserData:function(){var t=this;this.isLoading=!0,D.put("/users/updateuserdata",this.user).then((function(e){var a=e.data;a.data.errors.length>0?(t.errors=a.data.errors,t.isLoading=!1):(t.errors=[],A.a.fire({icon:"success",title:"Alteração realizada com êxito",text:"Os dados foram atualizados com sucesso!",showConfirmButton:!1,timer:1500}),t.$router.push("/"))}))},back:function(){this.$router.go(-1)}},created:function(){var t=this;this.isLoading=!0;var e=this;this.$store.dispatch("getUser").then((function(){e.user=Object.assign({},t.$store.state.user),t.isLoading=!1}))}},xt=Pt,$t=(a("4f19"),Object(u["a"])(xt,gt,ht,!1,null,"7c5bdef6",null)),zt=$t.exports,St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"login"},[a("h1",[t._v("Entrar")]),a("form",[a("label",{attrs:{for:"user"}},[t._v("CPF")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.cpf,expression:"credentials.cpf"}],attrs:{type:"text",name:"user",id:"user"},domProps:{value:t.credentials.cpf},on:{input:function(e){e.target.composing||t.$set(t.credentials,"cpf",e.target.value)}}}),a("label",{attrs:{for:"password"}},[t._v("Senha")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],attrs:{type:"password",name:"password",id:"password"},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}}),a("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.login(e)}}},[t._v("Logar")]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.message)+" ")])])])},kt=[],At={name:"Login",data:function(){return{message:"",credentials:{cpf:"",password:""}}},methods:{login:function(){var t=this;this.message="Verificando credenciais...",this.$store.dispatch("login",this.credentials).then((function(e){e.data.successful_login?t.$router.push({name:"home"}):t.message="Credenciais inválidas!"})).catch((function(){t.message="Não foi possível se conectar com o servidor :("}))}}},Mt=At,Et=(a("8849"),Object(u["a"])(Mt,St,kt,!1,null,"2de9171c",null)),Vt=Et.exports,Dt=void 0;i["a"].use(P["a"]);var Ot=new P["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:et},{path:"/editar",name:"edit",component:st},{path:"/alterarsenha",name:"updatepassword",component:vt},{path:"/alterardados",name:"updateuserdata",component:zt},{path:"/login",name:"login",component:Vt}],scrollBehavior:function(){return window.scrollTo({top:0,behavior:"smooth"})}});Ot.beforeEach((function(t,e,a){t.matched.some((function(t){return t.meta.login}))?window.localStorage.token?a():A.a.fire({icon:"info",title:"Sessão expirada",text:"A sua sessão expirou. Você será redirecionado para a página de login em instantes.",showConfirmButton:!1,timer:2500}).then((function(){Dt.$store.dispatch("logout"),a("/login")})):a()}));var Nt=Ot;i["a"].config.productionTip=!1,i["a"].use(w["a"]),new i["a"]({router:Nt,store:E,render:function(t){return t(y)}}).$mount("#app")},8271:function(t,e,a){t.exports=a.p+"img/fullbrasao.2718f8ba.png"},"85ec":function(t,e,a){},8849:function(t,e,a){"use strict";a("c115")},"9a72":function(t,e,a){},a218:function(t,e,a){},c115:function(t,e,a){},c93a:function(t,e,a){},ce77:function(t,e,a){},d0d2:function(t,e,a){"use strict";a("1036")},d308:function(t,e,a){},e074:function(t,e,a){},f6b6:function(t,e,a){"use strict";a("4ebe")}});
//# sourceMappingURL=app.477bb601.js.map