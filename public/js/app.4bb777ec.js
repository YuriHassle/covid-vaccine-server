(function(t){function e(e){for(var i,r,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},n={app:0},s=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0151":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFEAAAAyCAMAAAATMcfwAAAAM1BMVEVHcEz////////////////////////////////////////////////////////////////P0YphAAAAEHRSTlMAY0f48OnP4LyJpXjFsdiYrGr5lwAAAwFJREFUWMPtltuOHSsMRAuwsQGarv//2vMA9GUyR1EykaJIw9OmMWv7UnY38L2+119esZT42h/ZLHsDAOO1FOgk/TITMjUAQHEz87opjSTbDfQLUV5Ezl3a9w6SLACaLoPU51knyXwB842QFzGt3bEMZRFbum3qfZI2sDycypOR3d3d6yLK0/BDGAEAzvn7XMROMgeguUic5uXy3x6meREjyXQC8RzL/RXleFyaiBjxOdEAIHIRy34ChHkvkZpIxjuNclXtUyLDrEsiWRBIMj8qW0n2fCUVddW5t4sx83isXZplVFLnv8ms29huGMl2TrkBAMbOsrW3HjefTBGNZJ/EsmudHADCLF7adQLgl0X7jNhIHsjk8K1He4gDB8k+s3c3Q83yox7TIkJJiYk8/cpxc7v0KNO589bZaqQxS/BjZVBX6PDnWayJZJ4duNesxS7zzPsnxDiz0i/iunGStNmBzyyg0M49Bz73cSk4bKIlD7vPM9KTmK6eNLNHHlcX+iaGNYkmsZKkmAlJ1pOkTnOZ7fVKw/lu2raIsFmDSRx8DrxxK/tYnXik1yB5EssmFnePmxhuE43xMe4CVyfGOpSk9vBh4jJu4mOQFgCtWyLTqFPt+TEXtfxs3L+nfSvh+w34j7+/zdL5/8dhayfiYPjw+N7b/XrFIQjxA8avyVQ0LqJDb2KU9jj8QAyUE4emUlSq68iaiiQbmo6gNlhVBuCUQDqDZVfpYM2qlXWoFNdUnkSETmfpJgdgObJ0c0EMJytDYWiRJ1yS6iRaLgw0iSh0hm4hdn352GDK7j6Jjd3dBXUCCg81Vrhk+ouYsIldRZ7EU8RaFzuqaLeMLna0JCOpTmIyOeES/GQwUZ9EH6JOp1jJIuMV9VdW4Z/u9T9P/IsrqfT9XaMypo5r/UKYrFHWJ0KqaEu24UtEuBZNB5CZY1AZhcFyUWXIIvG3iKZ+coaNFpkZLMtR6BLUfy/qNNwDTsy2GZuYk3v9daJoj1UsAyOJt2RymoifolaGWPmXZfcfJJ4/sR5ExsUAAAAASUVORK5CYII="},"034f":function(t,e,a){"use strict";a("85ec")},"1a98":function(t,e,a){"use strict";a("ce77")},3582:function(t,e,a){"use strict";a("806d")},"3ee8":function(t,e,a){t.exports=a.p+"img/full_brand.8e5e2997.png"},"4ea6":function(t,e,a){"use strict";a("c93a")},"4ebe":function(t,e,a){},"4f19":function(t,e,a){"use strict";a("a218")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("Header"),a("v-main",[a("transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1),a("Footer")],1)},s=[],r=(a("b0c0"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",[i("div",{staticClass:"header-title"},[i("a",{staticClass:"vacinometro",attrs:{href:"https://labonline.manaus.am.gov.br/"}},[i("p",[t._v("VACINAÇÃO COVID-19")]),i("b",[t._v("SEMSA MANAUS")])])]),i("a",{attrs:{href:"https://manaus.am.gov.br"}},[i("img",{attrs:{src:a("3ee8")}})])])}],c={},l=c,u=(a("92aa"),a("2877")),d=Object(u["a"])(l,r,o,!1,null,"0b24e568",null),p=d.exports,m=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},v=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("footer",{staticClass:"pa-8"},[i("div",{staticClass:"container"},[i("div",{staticClass:"footer-text"},[i("p",[t._v(" © 2021 - Secretaria Municipal de Saúde - SEMSA ")]),i("p",[t._v(" Desenvolvido pelo Departamento de Tecnologia da Informação - DTI. ")])]),i("div",{staticClass:"footer-images"},[i("a",{attrs:{href:"https://covid19.manaus.am.gov.br/"}},[i("img",{attrs:{src:a("9a07")}})]),i("a",{attrs:{href:"https://semsa.manaus.am.gov.br/"}},[i("img",{attrs:{src:a("0151")}})])])])])}],f={},h=f,g=(a("3582"),Object(u["a"])(h,m,v,!1,null,"21e41ff6",null)),b=g.exports,C={name:"App",components:{Header:p,Footer:b},created:function(){localStorage.getItem("token")?this.$store.dispatch("getUser"):localStorage.getItem("token")||"login"===this.$router.history.current.name||this.$router.push({name:"login"})}},_=C,A=(a("034f"),a("6544")),x=a.n(A),w=a("7496"),y=a("f6c4"),F=Object(u["a"])(_,n,s,!1,null,null,null),P=F.exports;x()(F,{VApp:w["a"],VMain:y["a"]});var S=a("b6d0"),k=(a("45fc"),a("8c4f")),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-tabs",{staticClass:"mt-3",attrs:{centered:""}},[a("v-tab",[a("v-icon",{attrs:{left:""}},[t._v(" fa-syringe ")]),t._v(" Cadastrar ")],1),a("v-tab",[a("v-icon",{attrs:{left:""}},[t._v(" fa-edit ")]),t._v(" Editar ")],1),a("v-tab",[a("v-icon",{attrs:{left:""}},[t._v(" fa-user-cog ")]),t._v(" Configurações ")],1),a("v-tab-item",[a("ApplicationForm",{attrs:{type:"create",application:t.application}})],1),a("v-tab-item",[t.visible?a("ApplicationForm",{attrs:{type:"edit",application:t.application},on:{changeVisibility:function(e){t.visible=e},setPastApplications:function(e){t.pastUserApplications=e}}}):t._e(),a("ApplicationList",{attrs:{pastUserApplications:t.pastUserApplications,searchCPFMsg:t.searchCPFMsg},on:{onEdit:t.handleEdit,findCPF:t.findCPF}})],1),a("v-tab-item",[a("v-card",{staticClass:"mx-auto my-8",attrs:{width:"600"}},[a("v-card-title",{staticClass:"white--text pa-5 card-title"},[a("v-icon",{attrs:{color:"white"}},[t._v("fa-cog")]),a("p",{staticClass:"ml-3 mb-0"},[t._v(" "+t._s(this.$store.state.user.name||"Carregando...")+" ")])],1),a("v-card-text",{staticClass:"pa-8"},[a("v-list",{staticClass:"mx-auto",attrs:{rounded:""}},[a("v-list-item-group",{attrs:{color:"primary"},on:{change:function(e){return t.handleMenuClick()}},model:{value:t.selectedMenu,callback:function(e){t.selectedMenu=e},expression:"selectedMenu"}},t._l(t.menuItems,(function(e){return a("v-list-item",{key:e.value,attrs:{value:e.value}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1)})),1)],1)],1)],1)],1)],1)],1)},E=[],U=a("5530"),V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-form",{ref:"applicationForm",on:{submit:function(e){return e.preventDefault(),t.handleSubmit()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card",{staticClass:"mx-auto my-6",attrs:{width:"600"}},[a("v-card-title",{staticClass:"white--text pa-5 card-title"},[a("v-icon",{attrs:{color:"white"}},[t._v("fa-user")]),a("p",{staticClass:"ml-3 mb-0 "},[t._v(" Dados do cidadão ")])],1),a("v-card-text",{staticClass:"pt-8 px-8"},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],staticClass:"mb-4",attrs:{label:"CPF",disabled:"edit"===t.type,"append-icon":"mdi-alert-circle",hint:t.CPFValidationMsg||"Somente números","persistent-hint":!!t.CPFValidationMsg||!1,inputmode:"numeric",clearable:"",outlined:"",rules:t.validators.cpf},on:{blur:function(e){return t.validateCPF()}},model:{value:t.application.citizen.cpf,callback:function(e){t.$set(t.application.citizen,"cpf",e)},expression:"application.citizen.cpf"}}),a("v-text-field",{staticClass:"mb-4",attrs:{label:"Nome",counter:"45",clearable:"","append-icon":"mdi-alert-circle",outlined:"",rules:t.validators.name},model:{value:t.application.citizen.name,callback:function(e){t.$set(t.application.citizen,"name","string"===typeof e?e.trim():e)},expression:"application.citizen.name"}}),a("v-select",{staticClass:"mb-4",attrs:{label:"Grupo prioritário",items:t.categories,"item-text":"name","item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:t.validators.categories,outlined:""},model:{value:t.application.category_id,callback:function(e){t.$set(t.application,"category_id",e)},expression:"application.category_id"}}),a("v-select",{staticClass:"mb-4",attrs:{label:"Grupo de atendimento",items:t.filteredServicegroups,"item-text":"name","item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:t.validators.servicegroups,outlined:""},model:{value:t.application.servicegroup_id,callback:function(e){t.$set(t.application,"servicegroup_id",e)},expression:"application.servicegroup_id"}}),a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"XX/XX/XXXX",expression:"'XX/XX/XXXX'"}],staticClass:"mb-4",attrs:{label:"Data de nascimento",clearable:"",hint:"somente números",inputmode:"numeric",rules:t.validators.birthday,outlined:""},model:{value:t.application.citizen.birthday,callback:function(e){t.$set(t.application.citizen,"birthday",e)},expression:"application.citizen.birthday"}}),a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"###############",expression:"'###############'"}],staticClass:"mb-2",attrs:{label:"CNS",hint:"Somente números",clearable:"",inputmode:"numeric",rules:t.validators.cns,outlined:""},model:{value:t.application.citizen.cns,callback:function(e){t.$set(t.application.citizen,"cns","string"===typeof e?e.trim():e)},expression:"application.citizen.cns"}})],1),a("v-card-title",{staticClass:"white--text card-title pa-5"},[a("v-icon",{attrs:{color:"white"}},[t._v("fa-syringe")]),a("p",{staticClass:"ml-3 mb-0"},[t._v(" Dados da vacina ")])],1),a("v-card-text",{staticClass:"pt-8 px-8"},[a("div",{staticClass:"d-flex"},[a("v-select",{staticClass:"mb-4",attrs:{label:"Dose",rules:t.validators.dose,outlined:"",disabled:t.readOnlyDose,items:[{text:1,value:1},{text:2,value:2}],"append-icon":"mdi-alert-circle"},on:{blur:function(e){t.readOnlyDose=!0}},model:{value:t.application.dose,callback:function(e){t.$set(t.application,"dose",e)},expression:"application.dose"}}),a("a",{staticClass:"edit-dose",on:{click:function(e){e.preventDefault(),t.readOnlyDose=!t.readOnlyDose}}},[a("v-icon",[t._v(" fa-edit ")])],1)],1),a("v-select",{staticClass:"mb-4",attrs:{label:"Local",items:t.locations,"item-text":"name","item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:t.validators.location,outlined:""},model:{value:t.application.location_id,callback:function(e){t.$set(t.application,"location_id",e)},expression:"application.location_id"}}),a("v-autocomplete",{staticClass:"mb-4",attrs:{label:"Vacinador",items:t.vaccinators,"item-text":"name","item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:t.validators.vaccinator,outlined:""},model:{value:t.application.vaccinator_id,callback:function(e){t.$set(t.application,"vaccinator_id",e)},expression:"application.vaccinator_id"}}),a("v-select",{staticClass:"mb-4",attrs:{label:"Lote",items:t.lots,"item-value":"id","no-data-text":"Carregando...","append-icon":"mdi-alert-circle",rules:t.validators.lot,outlined:""},scopedSlots:t._u([{key:"selection",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.name)+" ")]}},{key:"item",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.immunobiological.name)+" - "+t._s(a.name)+" ")]}}]),model:{value:t.application.lot_id,callback:function(e){t.$set(t.application,"lot_id",e)},expression:"application.lot_id"}}),a("v-text-field",{attrs:{label:"Data de vacinação",type:"date",min:"2021-01-19",max:t.today,"append-icon":"mdi-alert-circle",rules:t.validators.application_date,outlined:""},model:{value:t.application.application_date,callback:function(e){t.$set(t.application,"application_date",e)},expression:"application.application_date"}})],1),a("v-card-actions",{staticClass:"flex-column justify-center"},[a("div",{staticClass:"flex-row"},[a("v-btn",{staticClass:"white--text btn mb-4",attrs:{elevation:"2",type:"submit"}},[t._v(" "+t._s("create"===t.type?"Cadastrar":"Editar")+" ")]),"edit"===t.type?a("v-btn",{staticClass:"ml-5 mb-4",attrs:{elevation:"2"},on:{click:function(e){return t.handleCancel()}}},[t._v(" Cancelar ")]):t._e()],1),a("div",{staticClass:"message"},[a("p",[t._v(t._s(t.message))])])])],1)],1)],1)},M=[],I=(a("99af"),a("4de4"),a("fb6a"),a("4d90"),a("3501"));function L(t){return Object(I["a"])(t)}function j(){var t=new Date,e=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),i=t.getFullYear();return t=i+"-"+a+"-"+e,t}function z(t){t=String(t);var e=t.slice(0,2),a=t.slice(3,5),i=t.slice(6,10);return"".concat(i,"-").concat(a,"-").concat(e)}function D(t){t=String(t);var e=t.slice(0,4),a=t.slice(5,7),i=t.slice(8,10);return"".concat(i,"/").concat(a,"/").concat(e)}a("d3b7");var T=a("bc3a"),$=a.n(T),B=a("3d20"),X=a.n(B),q=a("2f62");i["a"].use(q["a"]);var N=new q["a"].Store({strict:!0,state:{user:{id:"",cpf:"",name:"",email:""},user_applications:[]},mutations:{UPDATE_USER:function(t,e){t.user=Object.assign(t.user,e)},UPDATE_USER_APPLICATIONS:function(t,e){t.user_applications=e},ADD_USER_APPLICATION:function(t,e){t.user_applications.unshift(e)}},actions:{getUser:function(t){return Z.get("/user").then((function(e){var a=e.data;t.commit("UPDATE_USER",a),localStorage.setItem("user_id",a.id)}))},getUserApplications:function(t){var e=localStorage.getItem("user_id");return Z.get("/applications?user_id=".concat(e,"&application_date=").concat(j())).then((function(e){var a=e.data;t.commit("UPDATE_USER_APPLICATIONS",a.data)}))},addUserApplication:function(t,e){var a=Object(U["a"])({},e);a.citizen=Object(U["a"])({},e.citizen),t.commit("ADD_USER_APPLICATION",a)},login:function(t,e){return Z.post("/login",e).then((function(e){var a=e.data;return a.data.successful_login&&(t.commit("UPDATE_USER",a.data.user),localStorage.setItem("token",a.data.access_token),localStorage.setItem("user_id",a.data.user.id)),a}))},logout:function(t){t.commit("UPDATE_USER",{id:"",cpf:"",name:"",email:""}),localStorage.getItem("token")&&window.localStorage.removeItem("token"),localStorage.getItem("user_id")&&window.localStorage.removeItem("user_id")}}}),J=$.a.create({baseURL:"https://smv.manaus.am.gov.br/api"});J.interceptors.request.use((function(t){var e=localStorage.getItem("token");return e&&(t.headers.Authorization="Bearer ".concat(e)),t}),(function(t){return Promise.reject(t)})),J.interceptors.response.use((function(t){return t}),(function(t){return 401===t.response.status&&"login"!==le.history.current.name&&le.push({name:"login"}).then((function(){N.dispatch("logout"),X.a.fire({icon:"info",title:"Sessão expirada",text:"A sua sessão expirou. Você foi redirecionado para a página de login.",showConfirmButton:!1,timer:2500})})),Promise.reject(t)}));var Z={get:function(t){return J.get(t)},post:function(t,e){return J.post(t,e)},delete:function(t){return J.delete(t)},put:function(t,e){return J.put(t,e)}},H=a("d4ec"),R=a("bee2"),Q=function(){function t(){Object(H["a"])(this,t)}return Object(R["a"])(t,null,[{key:"required",value:function(t){return function(e){return!!e||t||"Este campo é obrigatório"}}},{key:"email",value:function(){return function(t){return/.+@.+/.test(t)||"E-mail precisa ter um formato válido"}}},{key:"max",value:function(t){return function(e){return!e||e.length<=t||"O número máximo de caracteres é ".concat(t)}}},{key:"min",value:function(t){return function(e){return!e||e.length>=t||"O número mínimo de caracteres é ".concat(t)}}},{key:"len",value:function(t){return function(e){return!e||e.length===t||"O número de caracteres deve ser ".concat(t)}}},{key:"validateCPF",value:function(){return function(t){return!t||L(t)||"Número de CPF inexistente"}}}]),t}(),K={name:"ApplicationForm",props:["type","application"],data:function(){return{readOnlyDose:!0,valid:null,message:"",CPFValidationMsg:"",checkedCPF:!1,today:j(),locations:[],categories:[],servicegroups:[],lots:[],vaccinators:[],errors:[],validators:{cpf:[Q.required(),Q.len(11),Q.validateCPF()],name:[Q.required(),Q.min(9),Q.max(45)],categories:[Q.required()],servicegroups:[Q.required()],birthday:[Q.len(10)],cns:[Q.len(15)],location:[Q.required()],vaccinator:[Q.required()],lot:[Q.required()],application_date:[Q.required()],dose:[Q.required()]}}},computed:{filteredServicegroups:function(){var t=this;return this.servicegroups?this.servicegroups.filter((function(e){return e.category_id===t.application.category_id})):[]}},methods:{handleSubmit:function(){if(this.$refs.applicationForm.validate(),!this.valid)return this.message="Por favor, preencha os dados corretamente!";this.message="Enviando dados...";var t=this.application.citizen.birthday;t&&(this.application.citizen.birthday=z(t)),"create"===this.type?this.registerApplication():"edit"===this.type&&this.editApplication()},handleCancel:function(){this.$refs.applicationForm.reset(),this.$emit("changeVisibility",!1)},registerApplication:function(){var t=this;if(!this.checkedCPF)return this.message="Por favor, aguarde a validação do CPF!";this.application.user_id=localStorage.getItem("user_id"),Z.post("/applications",this.application).then((function(e){var a=e.data;t.application.id=a.data.id,t.application.citizen.id=a.data.citizen_id,t.$store.dispatch("addUserApplication",t.application),t.message="",t.CPFValidationMsg="",t.clearForm(),t.$refs.applicationForm.resetValidation(),X.a.fire({icon:"success",title:"Cadastrado com êxito",text:"Os dados registrados com sucesso!",showConfirmButton:!1,timer:1500})})).catch((function(){t.message="",X.a.fire({icon:"error",title:"Erro ao cadastrar",text:"Ocorreu algum erro. Por favor, tente novamente.",showConfirmButton:!1,timer:2e3})}))},editApplication:function(){var t=this;this.application.updated_by=localStorage.getItem("user_id"),Z.put("/applications/".concat(this.application.id),this.application).then((function(){t.message="",t.$refs.applicationForm.reset(),t.$emit("changeVisibility",!1),t.$emit("setPastApplications",[]),X.a.fire({icon:"success",title:"Alteração realizada com êxito",text:"Os dados foram atualizados com sucesso!",showConfirmButton:!1,timer:1500})})).catch((function(){t.message="",X.a.fire({icon:"error",title:"Erro ao atualizar",text:"Ocorreu algum erro. Por favor, tente novamente.",showConfirmButton:!1,timer:2e3})}))},validateCPF:function(){var t=this,e=this.application.citizen.cpf;e&&(this.CPFValidationMsg="Verificando CPF...",Z.get("/applications?cpf=".concat(e)).then((function(e){var a=e.data;if(a.data.length>1){var i=D(a.data[1].application_date),n=D(a.data[0].application_date);t.CPFValidationMsg="O portador deste CPF já recebeu as duas doses.\n              1ª dose: ".concat(i,"\n              2ª dose: ").concat(n)}else t.checkedCPF=!0,1===a.data.length?(t.application.dose=2,t.CPFValidationMsg="CPF apto para receber a 2ª dose!"):(t.application.dose=1,t.CPFValidationMsg="CPF apto para receber a 1ª dose!")})).catch((function(){t.CPFValidationMsg="Não foi possível consultar o CPF. Favor recarregar a página e tentar novamente."})))},clearForm:function(){this.application.servicegroup_id="",this.application.citizen.cpf="",this.application.citizen.cns="",this.application.citizen.name="",this.application.citizen.birthday=""},fetchVaccinators:function(){var t=this;Z.get("/vaccinators").then((function(e){var a=e.data;t.vaccinators=a.data}))},fetchLocations:function(){var t=this;Z.get("/locations").then((function(e){var a=e.data;t.locations=a.data}))},fetchCategories:function(){var t=this;Z.get("/categories").then((function(e){var a=e.data;t.categories=a.data}))},fetchServicegroups:function(){var t=this;Z.get("/servicegroups").then((function(e){var a=e.data;t.servicegroups=a.data}))},fetchLots:function(){var t=this;Z.get("/lots").then((function(e){var a=e.data;t.lots=a.data}))}},created:function(){this.fetchVaccinators(),this.fetchLocations(),this.fetchCategories(),this.fetchServicegroups(),this.fetchLots()}},W=K,G=(a("f3bb"),a("c6a6")),Y=a("8336"),tt=a("b0af"),et=a("99d9"),at=a("a523"),it=a("4bd4"),nt=a("132d"),st=a("b974"),rt=a("8654"),ot=Object(u["a"])(W,V,M,!1,null,"bc479e46",null),ct=ot.exports;x()(ot,{VAutocomplete:G["a"],VBtn:Y["a"],VCard:tt["a"],VCardActions:et["a"],VCardText:et["b"],VCardTitle:et["c"],VContainer:at["a"],VForm:it["a"],VIcon:nt["a"],VSelect:st["a"],VTextField:rt["a"]});var lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("v-card",{staticClass:"mx-auto my-8",attrs:{width:"600"}},[a("v-card-title",{staticClass:"white--text pa-5 card-title"},[a("v-icon",{attrs:{color:"white"}},[t._v("fa-laptop")]),a("p",{staticClass:"ml-3 mb-0"},[t._v(" Vacinações digitadas por "+t._s(this.$store.state.user.name)+" ")])],1),a("v-card-text",{staticClass:"pa-8"},[a("h3",[t._v("Buscar vacinações de datas anteriores:")]),a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],staticClass:"mb-4",attrs:{label:"CPF","append-icon":"mdi-send",clearable:"",hint:t.searchCPFMsg||"Somente números","persistent-hint":!!t.searchCPFMsg||!1,inputmode:"numeric",rules:t.validators.cpf,outlined:""},on:{"click:append":function(e){return t.$emit("findCPF",t.cpf)}},model:{value:t.cpf,callback:function(e){t.cpf=e},expression:"cpf"}}),0!==t.pastUserApplications.length?a("div",[a("div",{staticClass:"font-weight-bold ml-8 mb-2"},[t._v(" Anteriormente ")]),a("v-timeline",{attrs:{"align-top":"",dense:""}},t._l(t.pastUserApplications,(function(e){return a("v-timeline-item",{key:e.id,attrs:{color:1===e.dose?"#CEB8A1":"#6862A7",small:""}},[a("div",{staticClass:"timeline-content"},[a("div",[a("div",{staticClass:"font-weight-normal"},[a("strong",[t._v(t._s(e.citizen.name))])]),a("div",[t._v("CPF: "+t._s(e.citizen.cpf))]),a("div",[t._v("Dose: "+t._s(e.dose))]),a("div",[t._v(" Data da aplicação: "+t._s(e.application_date)+" ")])]),a("a",{on:{click:function(a){return a.preventDefault(),t.$emit("onEdit",e)}}},[a("v-icon",{staticClass:"ml-7"},[t._v(" far fa-edit ")])],1)])])})),1)],1):t._e(),a("div",{staticClass:"font-weight-bold ml-8 mb-2"},[t._v(" Hoje ")]),0!==t.userApplications.length?a("v-timeline",{attrs:{"align-top":"",dense:""}},t._l(t.userApplications,(function(e){return a("v-timeline-item",{key:e.id,attrs:{color:1===e.dose?"#CEB8A1":"#6862A7",small:""}},[a("div",{staticClass:"timeline-content"},[a("div",[a("div",{staticClass:"font-weight-normal"},[a("strong",[t._v(t._s(e.citizen.name))])]),a("div",[t._v("CPF: "+t._s(e.citizen.cpf))]),a("div",[t._v("Dose: "+t._s(e.dose))])]),a("a",{on:{click:function(a){return a.preventDefault(),t.$emit("onEdit",e)}}},[a("v-icon",{staticClass:"ml-7"},[t._v(" far fa-edit ")])],1)])])})),1):a("div",{staticClass:"message ml-8"},[a("p",[t._v("Os seus registros da data de hoje aparecerão aqui")])])],1)],1)],1)},ut=[],dt={props:["searchCPFMsg","pastUserApplications"],data:function(){return{cpf:"",validators:{cpf:[Q.required(),Q.len(11),Q.validateCPF()]}}},computed:{userApplications:function(){return this.$store.state.user_applications}},mounted:function(){this.$store.dispatch("getUserApplications")}},pt=dt,mt=(a("c863"),a("8414")),vt=a("1e06"),ft=Object(u["a"])(pt,lt,ut,!1,null,"638425fe",null),ht=ft.exports;x()(ft,{VCard:tt["a"],VCardText:et["b"],VCardTitle:et["c"],VIcon:nt["a"],VTextField:rt["a"],VTimeline:mt["a"],VTimelineItem:vt["a"]});var gt={name:"Home",components:{ApplicationForm:ct,ApplicationList:ht},data:function(){return{visible:!1,searchCPFMsg:"",application:{id:"",user_id:"",location_id:"",lot_id:"",category_id:"",servicegroup_id:"",vaccinator_id:"",application_date:"",dose:"",citizen:{cpf:"",cns:"",name:"",birthday:""}},selectedMenu:"",menuItems:[{text:"Deslogar",value:"logout",icon:"fa-sign-out-alt"},{text:"Trocar senha",value:"change-password",icon:"fa-user-lock"},{text:"Alterar dados",value:"update-user-data",icon:"fa-user-edit"}],pastUserApplications:[]}},methods:{handleEdit:function(t){this.application=Object(U["a"])({},t),this.application.citizen=Object(U["a"])({},t.citizen);var e=this.application.citizen.birthday;e&&(this.application.citizen.birthday=D(e)),this.visible=!0,window.scrollTo({top:0,behavior:"smooth"})},findCPF:function(t){var e=this;this.searchCPFMsg="Procurando CPF...",Z.get("applications?cpf=".concat(t)).then((function(t){var a=t.data;0!==a.data.length?(e.pastUserApplications=a.data,e.searchCPFMsg=""):e.searchCPFMsg="Esse CPF não consta em nossa base"}))},handleMenuClick:function(){console.log(this.selectedMenu),"logout"===this.selectedMenu&&(this.$store.dispatch("logout"),this.$router.push({name:"login"})),"change-password"===this.selectedMenu&&this.$router.push({name:"updatepassword"}),"update-user-data"===this.selectedMenu&&this.$router.push({name:"updateuserdata"})}}},bt=gt,Ct=a("8860"),_t=a("da13"),At=a("5d23"),xt=a("1baa"),wt=a("34c3"),yt=a("71a3"),Ft=a("c671"),Pt=a("fe57"),St=Object(u["a"])(bt,O,E,!1,null,"59483ed1",null),kt=St.exports;x()(St,{VCard:tt["a"],VCardText:et["b"],VCardTitle:et["c"],VContainer:at["a"],VIcon:nt["a"],VList:Ct["a"],VListItem:_t["a"],VListItemContent:At["a"],VListItemGroup:xt["a"],VListItemIcon:wt["a"],VListItemTitle:At["b"],VTab:yt["a"],VTabItem:Ft["a"],VTabs:Pt["a"]});var Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":!0},on:{"update:active":function(e){t.isLoading=e}}}),t.errors.length?a("div",{staticClass:"validation-errors"},[a("b",[t._v("Por favor, corrija o(s) seguinte(s) erro(s):")]),a("ol",t._l(t.errors,(function(e,i){return a("li",{key:i},[t._v(t._s(e))])})),0)]):t._e(),a("form",[a("FormField",{attrs:{label:"Senha Antiga",required:!0,name:"old-password"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],attrs:{type:"password",name:"old-password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),a("FormField",{attrs:{label:"Nova Senha",required:!0,name:"new-password"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.new_password,expression:"user.new_password"}],attrs:{type:"password",name:"new-password"},domProps:{value:t.user.new_password},on:{input:function(e){e.target.composing||t.$set(t.user,"new_password",e.target.value)}}})]),a("FormField",{attrs:{label:"Confirmar Senha",required:!0,name:"confirm-password"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.new_confirm_password,expression:"user.new_confirm_password"}],attrs:{type:"password",name:"confirm-password"},domProps:{value:t.user.new_confirm_password},on:{input:function(e){e.target.composing||t.$set(t.user,"new_confirm_password",e.target.value)}}})]),a("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.updatePassword()}}},[t._v(" Atualizar ")]),a("button",{staticClass:"btn btn-danger",on:{click:function(e){return e.preventDefault(),t.back()}}},[t._v("Cancelar")])],1)],1)},Et=[],Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-form"},[a("label",{attrs:{for:t.name}},[t._v(t._s(t.label)+" "),t.required?a("span",[t._v("*")]):t._e()]),t._t("default")],2)},Vt=[],Mt={props:{label:{type:String,required:!0},name:{type:String,required:!0},required:{type:Boolean,default:!1}}},It=Mt,Lt=(a("1a98"),Object(u["a"])(It,Ut,Vt,!1,null,"9282a50c",null)),jt=Lt.exports,zt=a("9062"),Dt=a.n(zt),Tt=(a("e40d"),{name:"updatepassword",components:{FormField:jt,Loading:Dt.a},data:function(){return{errors:[],user:{},isLoading:!1}},methods:{updatePassword:function(){var t=this;this.isLoading=!0,Z.put("/users/updatepassword",this.user).then((function(e){var a=e.data;a.data.errors.length>0?(t.errors=a.data.errors,t.isLoading=!1):(t.errors=[],X.a.fire({icon:"success",title:"Alteração realizada com êxito",text:"Os dados foram atualizados com sucesso!",showConfirmButton:!1,timer:1500}),t.$router.push("/"))}))},back:function(){this.$router.go(-1)}}}),$t=Tt,Bt=(a("f6b6"),Object(u["a"])($t,Ot,Et,!1,null,"724239cc",null)),Xt=Bt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":!0},on:{"update:active":function(e){t.isLoading=e}}}),t.errors.length?a("div",{staticClass:"validation-errors"},[a("b",[t._v("Por favor, corrija o(s) seguinte(s) erro(s):")]),a("ol",t._l(t.errors,(function(e,i){return a("li",{key:i},[t._v(t._s(e))])})),0)]):t._e(),a("UserForm",{attrs:{type:"edit",user:t.user}}),a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.updateUserData()}}},[t._v(" Atualizar ")]),a("button",{staticClass:"btn btn-danger",on:{click:function(e){return e.preventDefault(),t.back()}}},[t._v("Cancelar")])])],1)},Nt=[],Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",["edit"==t.type?a("h1",[t._v("Atualizar Dados")]):a("h1",[t._v("Cadastrar Usuário")]),a("div",{staticClass:"fields-container"},[a("FormField",{attrs:{label:"Nome",required:!0,name:"name"}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.user.name,expression:"user.name",modifiers:{trim:!0}}],attrs:{type:"text",name:"name",disabled:"type=='edit'"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("FormField",{attrs:{label:"CPF",required:!0,name:"cpf"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.cpf,expression:"user.cpf"}],attrs:{type:"text",name:"cpf",disabled:"type=='edit'"},domProps:{value:t.user.cpf},on:{input:function(e){e.target.composing||t.$set(t.user,"cpf",e.target.value)}}})]),a("FormField",{attrs:{label:"Email",required:!0,name:"email"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],attrs:{type:"text",name:"email",inputmode:"text"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})])],1)])},Zt=[],Ht={name:"UserForm",props:["type","user"],components:{FormField:jt},data:function(){return{}}},Rt=Ht,Qt=(a("4ea6"),Object(u["a"])(Rt,Jt,Zt,!1,null,"25fac4da",null)),Kt=Qt.exports,Wt={name:"updateuserdata",components:{Loading:Dt.a,UserForm:Kt},data:function(){return{errors:[],user:{},isLoading:!1,edit:!0}},methods:{updateUserData:function(){var t=this;this.isLoading=!0,Z.put("/users/updateuserdata",this.user).then((function(e){var a=e.data;a.data.errors.length>0?(t.errors=a.data.errors,t.isLoading=!1):(t.errors=[],X.a.fire({icon:"success",title:"Alteração realizada com êxito",text:"Os dados foram atualizados com sucesso!",showConfirmButton:!1,timer:1500}),t.$router.push("/"))}))},back:function(){this.$router.go(-1)}},created:function(){var t=this;this.isLoading=!0;var e=this;this.$store.dispatch("getUser").then((function(){e.user=Object.assign({},t.$store.state.user),t.isLoading=!1}))}},Gt=Wt,Yt=(a("4f19"),Object(u["a"])(Gt,qt,Nt,!1,null,"7c5bdef6",null)),te=Yt.exports,ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-form",{ref:"loginForm",on:{submit:function(e){return e.preventDefault(),t.handleSubmit()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card",{staticClass:"mx-auto pt-5 mb-3",attrs:{width:"500"}},[a("v-card-title",{staticClass:"white--text pa-5 card-title"},[a("v-icon",{attrs:{color:"white"}},[t._v("fa-user")]),a("p",{staticClass:"ml-3 mb-0 "},[t._v(" Entrar ")])],1),a("v-card-text",{staticClass:"pt-8 px-8"},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],staticClass:"mb-4",attrs:{label:"CPF",hint:"Somente números",inputmode:"numeric",clearable:"",outlined:"",rules:t.validators.cpf},model:{value:t.credentials.cpf,callback:function(e){t.$set(t.credentials,"cpf",e)},expression:"credentials.cpf"}}),a("v-text-field",{attrs:{label:"Senha",clearable:"",outlined:"",rules:t.validators.password,type:"password"},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}})],1),a("v-card-actions",{staticClass:"flex-column justify-center"},[a("v-btn",{staticClass:"white--text btn mb-4",attrs:{elevation:"2",type:"submit"}},[t._v(" Logar ")]),a("div",{staticClass:"message"},[a("p",[t._v(t._s(t.message))])])],1)],1)],1)],1)},ae=[],ie={name:"Login",data:function(){return{valid:!1,message:"",credentials:{cpf:"",password:""},validators:{cpf:[Q.required(),Q.len(11)],password:[Q.required()]}}},methods:{handleSubmit:function(){var t=this;if(this.$refs.loginForm.validate(),!this.valid)return this.message="Por favor, preencha os dados corretamente!";this.message="Verificando credenciais...",this.$store.dispatch("login",this.credentials).then((function(e){e.data.successful_login?t.$router.push({name:"home"}):t.message="Credenciais inválidas!"})).catch((function(){t.message="Não foi possível se conectar com o servidor :("}))}}},ne=ie,se=Object(u["a"])(ne,ee,ae,!1,null,"3ffd1f51",null),re=se.exports;x()(se,{VBtn:Y["a"],VCard:tt["a"],VCardActions:et["a"],VCardText:et["b"],VCardTitle:et["c"],VContainer:at["a"],VForm:it["a"],VIcon:nt["a"],VTextField:rt["a"]});var oe=void 0;i["a"].use(k["a"]);var ce=new k["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:kt},{path:"/alterarsenha",name:"updatepassword",component:Xt},{path:"/alterardados",name:"updateuserdata",component:te},{path:"/login",name:"login",component:re}],scrollBehavior:function(){return window.scrollTo({top:0,behavior:"smooth"})}});ce.beforeEach((function(t,e,a){t.matched.some((function(t){return t.meta.login}))?window.localStorage.token?a():X.a.fire({icon:"info",title:"Sessão expirada",text:"A sua sessão expirou. Você será redirecionado para a página de login em instantes.",showConfirmButton:!1,timer:2500}).then((function(){oe.$store.dispatch("logout"),a("/login")})):a()}));var le=ce,ue=a("f309");i["a"].use(ue["a"]);var de=new ue["a"]({});i["a"].config.productionTip=!1,i["a"].use(S["a"]),new i["a"]({router:le,store:N,vuetify:de,render:function(t){return t(P)}}).$mount("#app")},"6e4a":function(t,e,a){},"806d":function(t,e,a){},"85ec":function(t,e,a){},"92aa":function(t,e,a){"use strict";a("6e4a")},"9a07":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHcAAAArCAMAAAB1q+c0AAAASFBMVEVHcEz///////////////////////////////////////////////////////////////////////////////////8Acrv///+8vuJ9AAAAFnRSTlMAYLAwQKAQwIC/4CBwB3+RuPDQUO8/Ui5SjgAAA0ZJREFUWMPF19t24ygQBdDDtQpQW6PbOv//p/NQSLY77ViZXhrzEDsYsSUKKAR+pET8obLqxSX92aX8wqUlvnCvhl+6F8Ov3Wvhb1z+8+sz7pXwt+4XuI2VLAuAdit+yACG4hsAIBUFhlJK8Yu19kUB6K0XRPt0793f4LhabUYkSa4OEFKtIwog1kABwJFsuPcO3b+8d5/gtpKzjtOAhmQ/LxByzQBSd+e4zNa1JzkAIjJxEhEoKSIynnEf4USOAIC8ug5XCEkHNHZXACUz0MiJFUCvBdTuB6fcB7iSGQAwkDschWQFdHfnbZtZrdFAhmd327Ytn3PvMO1yQzo8COeJEZX+Ht8pAKhMmUzPriWEc+4Bk/Pd7bATSmJZWNXcSSayZARyQeL6F+4OH+O88ICbUAI5c9Ajvgs5IJGlVNL91/je4ZH0GWgNdYcFQoGQzHcXpOa+5Oj/xjU4T2QthWsOU4czhAJHJug+rxZPOke6GGMi26NbSinlB67BwZ6TAUFImzS2cjTsrqUUiM2FYEv4Kb78iduf2HmRMQBAizEDgFPXR04d4LyIjBFQjbbkdDnaxH7W+JFrsJmX54WnokAkb/+3axEeq/vSRw4XuraU4m04NHcbhwygxZSXlpG3DQDCltvWgLht7UkKALLtkj+cz4Ane2c2txMaUuHqvSLbVjQxKtUm77pHJd9WCpBIpvwD1xvbLLUByCurqgSMfemEgJkKBE4wt0q1bcO2OgqUk0wcz7v9aijnntoGThkAct5P+s1W8MDUXQW078bQ5CmYuSDaln3K9fdMGCZLbd4yDZrsjdIQSMDT3V0bgn7L5sIidcY92IUzxj21WYch7a2WgIlLJvODK0yI2xbMHbmW2YbghOsfDxx1tnEae07Uwx0AZXJMeHArNdqJQKnInqxnn/fO7qFcsO8gbj/h9UzF1TPgKb4BMcZeZxOjnopvuq/Agf742485HsFg8YMtM8Hu1rI+XK5UwN2S3fZb94GFSgTQxE47g5BVgVG9TE77qqQ7XJKT4sklObkz+0Z6v+Pl7FDb1/oWY3j6twGuZ6l3bvrMe0r6zHvZ+Jn30CvZb9xL2dfutexL92L2lVvLxWVmhHykhH8BWB/EwHHvd74AAAAASUVORK5CYII="},"9a1f":function(t,e,a){},a218:function(t,e,a){},c863:function(t,e,a){"use strict";a("d388")},c93a:function(t,e,a){},ce77:function(t,e,a){},d388:function(t,e,a){},f3bb:function(t,e,a){"use strict";a("9a1f")},f6b6:function(t,e,a){"use strict";a("4ebe")}});
//# sourceMappingURL=app.4bb777ec.js.map